!function(D){D.fn.extend({slimScroll:function(E){var R=D.extend({width:"auto",height:"250px",size:"7px",color:"#000",position:"right",distance:"1px",start:"top",opacity:.4,alwaysVisible:!1,disableFadeOut:!1,railVisible:!1,railColor:"#333",railOpacity:.2,railDraggable:!0,railClass:"slimScrollRail",barClass:"slimScrollBar",wrapperClass:"slimScrollDiv",allowPageScroll:!1,wheelStep:20,touchScrollStep:200,borderRadius:"7px",railBorderRadius:"7px"},E);return this.each(function(){function e(e){if(s){var t=0;(e=e||window.event).wheelDelta&&(t=-e.wheelDelta/120),e.detail&&(t=e.detail/3);var i=e.target||e.srcTarget||e.srcElement;D(i).closest("."+R.wrapperClass).is(w.parent())&&o(t,!0),e.preventDefault&&!b&&e.preventDefault(),b||(e.returnValue=!1)}}function o(e,t,i){b=!1;var o=e,s=w.outerHeight()-H.outerHeight();if(t&&(o=parseInt(H.css("top"))+e*parseInt(R.wheelStep)/100*H.outerHeight(),o=Math.min(Math.max(o,0),s),o=0<e?Math.ceil(o):Math.floor(o),H.css({top:o+"px"})),o=(d=parseInt(H.css("top"))/(w.outerHeight()-H.outerHeight()))*(w[0].scrollHeight-w.outerHeight()),i){var r=(o=e)/w[0].scrollHeight*w.outerHeight();r=Math.min(Math.max(r,0),s),H.css({top:r+"px"})}w.scrollTop(o),w.trigger("slimscrolling",~~o),a(),l()}function i(){u=Math.max(w.outerHeight()/w[0].scrollHeight*w.outerHeight(),v),H.css({height:u+"px"});var e=u==w.outerHeight()?"none":"block";H.css({display:e})}function a(){if(i(),clearTimeout(c),d==~~d){if(b=R.allowPageScroll,p!=d){var e=0==~~d?"top":"bottom";w.trigger("slimscroll",e)}}else b=!1;return p=d,u>=w.outerHeight()?void(b=!0):(H.stop(!0,!0).fadeIn("fast"),void(R.railVisible&&C.stop(!0,!0).fadeIn("fast")))}function l(){R.alwaysVisible||(c=setTimeout(function(){R.disableFadeOut&&s||r||n||(H.fadeOut("slow"),C.fadeOut("slow"))},1e3))}var s,r,n,c,h,u,d,p,g,f="<div></div>",v=30,b=!1,w=D(this);if(w.parent().hasClass(R.wrapperClass)){var m=w.scrollTop();if(H=w.closest("."+R.barClass),C=w.closest("."+R.railClass),i(),D.isPlainObject(E)){if("height"in E&&"auto"==E.height){w.parent().css("height","auto"),w.css("height","auto");var y=w.parent().parent().height();w.parent().css("height",y),w.css("height",y)}if("scrollTo"in E)m=parseInt(R.scrollTo);else if("scrollBy"in E)m+=parseInt(R.scrollBy);else if("destroy"in E)return H.remove(),C.remove(),void w.unwrap();o(m,!1,!0)}}else if(!(D.isPlainObject(E)&&"destroy"in E)){R.height="auto"==R.height?w.parent().height():R.height;var x=D(f).addClass(R.wrapperClass).css({position:"relative",overflow:"hidden",width:R.width,height:R.height});w.css({overflow:"hidden",width:R.width,height:R.height});var C=D(f).addClass(R.railClass).css({width:R.size,height:"100%",position:"absolute",top:0,display:R.alwaysVisible&&R.railVisible?"block":"none","border-radius":R.railBorderRadius,background:R.railColor,opacity:R.railOpacity,zIndex:90}),H=D(f).addClass(R.barClass).css({background:R.color,width:R.size,position:"absolute",top:0,opacity:R.opacity,display:R.alwaysVisible?"block":"none","border-radius":R.borderRadius,BorderRadius:R.borderRadius,MozBorderRadius:R.borderRadius,WebkitBorderRadius:R.borderRadius,zIndex:99}),S="right"==R.position?{right:R.distance}:{left:R.distance};C.css(S),H.css(S),w.wrap(x),w.parent().append(H),w.parent().append(C),R.railDraggable&&H.bind("mousedown",function(e){var i=D(document);return n=!0,t=parseFloat(H.css("top")),pageY=e.pageY,i.bind("mousemove.slimscroll",function(e){currTop=t+e.pageY-pageY,H.css("top",currTop),o(0,H.position().top,!1)}),i.bind("mouseup.slimscroll",function(e){n=!1,l(),i.unbind(".slimscroll")}),!1}).bind("selectstart.slimscroll",function(e){return e.stopPropagation(),e.preventDefault(),!1}),C.hover(function(){a()},function(){l()}),H.hover(function(){r=!0},function(){r=!1}),w.hover(function(){s=!0,a(),l()},function(){s=!1,l()}),w.bind("touchstart",function(e,t){e.originalEvent.touches.length&&(h=e.originalEvent.touches[0].pageY)}),w.bind("touchmove",function(e){(b||e.originalEvent.preventDefault(),e.originalEvent.touches.length)&&(o((h-e.originalEvent.touches[0].pageY)/R.touchScrollStep,!0),h=e.originalEvent.touches[0].pageY)}),i(),"bottom"===R.start?(H.css({top:w.outerHeight()-H.outerHeight()}),o(0,!0)):"top"!==R.start&&(o(D(R.start).position().top,null,!0),R.alwaysVisible||H.hide()),g=this,window.addEventListener?(g.addEventListener("DOMMouseScroll",e,!1),g.addEventListener("mousewheel",e,!1)):document.attachEvent("onmousewheel",e)}}),this}}),D.fn.extend({slimscroll:D.fn.slimScroll})}(jQuery);