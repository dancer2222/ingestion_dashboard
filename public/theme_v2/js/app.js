$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},url:location.origin});var CommonHelper={mediaTypes:["books","audiobooks","albums","games","movies"],toastr:function(t,e){window.toastr||alert(e+"! "+t)},btnAjax:function(t){t.classList.contains("running")?t.classList.remove("running","hovering","disabled"):t.classList.add("running","hovering","disabled")},blacklistStatus:function(e){this.btnAjax(e);var a=this,t=e.getAttribute("data-url"),n=e.getAttribute("data-id"),o=e.getAttribute("data-status"),s="By some reason it wasn't added to blacklist",i="error";$.ajax({url:t,method:"post",data:{id:n,status:o},success:function(t){a.btnAjax(e),t&&(s="Successfully completed.",i="success",$("#status_panel .form-check-inline").toggleClass("hidden"),$("#blacklist_add").toggleClass("hidden"),$("#blacklist_remove").toggleClass("hidden"),"active"===o&&$(".status_border_card").toggleClass("border-danger").toggleClass("border-success")),a.toastr(s,i)},error:function(t){console.error(t),a.toastr(s,i),a.btnAjax(e)}})},setStatus:function(t){this.statusPanelFadeToggle();var e=this,a=t.value,n=t.dataset.id,o=t.dataset.mediaType;if(e.mediaTypes.indexOf(o)<0)return console.error("Wrong media type is passed."),e.statusPanelToggle(!0),!1;$.ajax({url:$.ajaxSettings.url+"/content/"+o+"/status",method:"post",data:{id:n,status:a},success:function(t){e.statusPanelToggle(!t.result),e.statusPanelFadeToggle()},error:function(t){console.log(t),e.statusPanelToggle(!0),e.statusPanelFadeToggle()}})},statusPanelFadeToggle:function(){var t=$("#status_panel").find("input");t.prop("disabled",!t.prop("disabled"))},statusPanelToggle:function(t){var e=$("#status_panel"),a=e.find("#status_active"),n=e.find("#status_inactive"),o=$(".status_border_card");if(t)return a.prop("checked")?n.prop("checked",!0):a.prop("checked",!0),!1;o.toggleClass("border-danger"),o.toggleClass("border-success")},copyToClipboard:function(t){var e=document.createElement("input");e.value=t,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e)},initClipboardBtns:function(){document.createElement("i").classList.add("fas","fa-copy");document.querySelectorAll("[data-clipboard]")}},Audiobook={},Book={},Movie={},Game={},Album={};function redirect(t){console.log(t),location.replace(location.origin+location.pathname+t)}function changeDbConnection(e){$.ajax({url:$.ajaxSettings.url+"/changeDbConnection",method:"post",data:{connectionName:e},success:function(t){t===e&&($("#db-dropdown").text(e),$(".defaultDatabase").text(e),$.notify({message:"Database connection was changed to: <b>"+t+"</b>"}))},error:function(t){console.log(t),$.notify({message:t.responseText+". Code: "+t.status},{type:"danger"})}})}$(document).ready(function(){$('[data-toggle="popover"]').popover(),$(".change-db").on("click",function(){changeDbConnection($(this).text())}),$("[type=submit]").on("click",function(){$("body").css({cursor:"progress"})}),$("#password-changing-enable").on("click",function(){$("input#password").attr("disabled",!1),$("input#password_confirmation").attr("disabled",!1)}),$(".tool-option-from-file").on("click",function(t){t.preventDefault();var e=$(this).data("triggerFile");return e&&$("#"+e).trigger("click"),!1}),$(".options_file_input").on("change",function(t){t.preventDefault();var e=this,a=$(this).data("url");if(!a)return!1;var n=new FormData;if(e.files.length<1)return!1;n.append("optionData",e.files[0]);var o=$(e).closest("form").find("#option-"+e.dataset.optionName);return $.ajax({url:a,method:"post",processData:!1,contentType:!1,data:n,success:function(t){o.val(t.data),e.value=null},error:function(t){console.log(t),e.value=null}}),!1}),$(".aws-notifications button#reset").on("click",function(t){t.preventDefault();var e=$(".aws-notifications form"),a=e.find('input[name="from_date"]'),n=e.find('input[name="to_date"]'),o=e.find('select[name="bucket"]');a.val(""),n.val(""),o.val(""),e.find('button[type="submit"]').click()}),$(".aws-notifications .pagination li.page-item a.page-link").on("click",function(t){t.preventDefault();var e=$(".aws-notifications form"),a=e.find('input[name="page"]'),n=$(this).text();return a.val(n),e.find('button[type="submit"]').click(),!1}),CommonHelper.initClipboardBtns(),$(".audiobook_status_change").on("change",function(t){CommonHelper.setStatus(this)}),$(".blacklist-btn").on("click",function(){CommonHelper.blacklistStatus(this)})});