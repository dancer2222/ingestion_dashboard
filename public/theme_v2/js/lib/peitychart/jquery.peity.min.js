!function(v,e,y,w){var r=v.fn.peity=function(e,n){return i&&this.each(function(){var t=v(this),i=t.data("_peity");i?(e&&(i.type=e),v.extend(i.opts,n)):(i=new a(t,e,v.extend({},r.defaults[e],t.data("peity"),n)),t.change(function(){i.draw()}).data("_peity",i)),i.draw()}),this},a=function(t,i,e){this.$el=t,this.type=i,this.opts=e},t=a.prototype,x=t.svgElement=function(t,i){return v(e.createElementNS("http://www.w3.org/2000/svg",t)).attr(i)},i="createElementNS"in e&&x("svg",{})[0].createSVGRect;t.draw=function(){var t=this.opts;r.graphers[this.type].call(this,t),t.after&&t.after.call(this,t)},t.fill=function(){var e=this.opts.fill;return v.isFunction(e)?e:function(t,i){return e[i%e.length]}},t.prepare=function(t,i){return this.$svg||this.$el.hide().after(this.$svg=x("svg",{class:"peity"})),this.$svg.empty().data("peity",this).attr({height:i,width:t})},t.values=function(){return v.map(this.$el.text().split(this.opts.delimiter),function(t){return parseFloat(t)})},r.defaults={},r.graphers={},r.register=function(t,i,e){this.defaults[t]=i,this.graphers[t]=e},r.register("pie",{fill:["#ff9900","#fff4dd","#ffc66e"],radius:8},function(t){if(!t.delimiter){var i=this.$el.text().match(/[^0-9\.]/);t.delimiter=i?i[0]:","}if(i=v.map(this.values(),function(t){return 0<t?t:0}),"/"==t.delimiter)i=[n=i[0],y.max(0,i[1]-n)];for(var e=0,n=i.length,r=0;e<n;e++)r+=i[e];r||(n=2,i=[0,r=1]);var a=2*t.radius,h=(e=(a=this.prepare(t.width||a,t.height||a)).width(),a.height()),s=e/2,l=h/2;h=y.min(s,l),t=t.innerRadius;"donut"==this.type&&!t&&(t=.5*h);var p=y.PI,o=this.fill(),f=this.scale=function(t,i){var e=t/r*p*2-p/2;return[i*y.cos(e)+s,i*y.sin(e)+l]},c=0;for(e=0;e<n;e++){var u=i[e];if(0!=(m=u/r)){if(1==m)if(t)var d=l-h,g=l-t,m=x("path",{d:["M",s,d,"A",h,h,0,1,1,m=s-.01,d,"L",m,g,"A",t,t,0,1,0,s,g].join(" ")});else m=x("circle",{cx:s,cy:l,r:h});else d=c+u,g=["M"].concat(f(c,h),"A",h,h,0,.5<m?1:0,1,f(d,h),"L"),t?g=g.concat(f(d,t),"A",t,t,0,.5<m?1:0,0,f(c,t)):g.push(s,l),c+=u,m=x("path",{d:g.join(" ")});m.attr("fill",o.call(this,u,e,i)),a.append(m)}}}),r.register("donut",v.extend(!0,{},r.defaults.pie),function(t){r.graphers.pie.call(this,t)}),r.register("line",{delimiter:",",fill:"#c6d9fd",height:16,min:0,stroke:"#4d89f9",strokeWidth:1,width:32},function(t){var i=this.values();1==i.length&&i.push(i[0]);for(var e=y.max.apply(y,t.max==w?i:i.concat(t.max)),n=y.min.apply(y,t.min==w?i:i.concat(t.min)),r=this.prepare(t.width,t.height),a=t.strokeWidth,h=r.width(),s=r.height()-a,l=e-n,p=(e=this.x=function(t){return t*(h/(i.length-1))},this.y=function(t){var i=s;return l&&(i-=(t-n)/l*s),i+a/2}),o=p(y.max(n,0)),f=[0,o],c=0;c<i.length;c++)f.push(e(c),p(i[c]));f.push(h,o),t.fill&&r.append(x("polygon",{fill:t.fill,points:f.join(" ")})),a&&r.append(x("polyline",{fill:"none",points:f.slice(2,f.length-2).join(" "),stroke:t.stroke,"stroke-width":a,"stroke-linecap":"square"}))}),r.register("bar",{delimiter:",",fill:["#4D89F9"],height:16,min:0,padding:.1,width:32},function(t){for(var i=this.values(),e=y.max.apply(y,t.max==w?i:i.concat(t.max)),n=y.min.apply(y,t.min==w?i:i.concat(t.min)),r=this.prepare(t.width,t.height),a=r.width(),h=r.height(),s=e-n,l=(t=t.padding,this.fill()),p=this.x=function(t){return t*a/i.length},o=this.y=function(t){return h-(s?(t-n)/s*h:1)},f=0;f<i.length;f++){var c,u=p(f+t),d=p(f+1-t)-u,g=i[f],m=o(g),v=m;s?g<0?v=o(y.min(e,0)):m=o(y.max(n,0)):c=1,0==(c=m-v)&&(c=1,0<e&&s&&v--),r.append(x("rect",{fill:l.call(this,g,f,i),x:u,y:v,width:d,height:c}))}})}(jQuery,document,Math);