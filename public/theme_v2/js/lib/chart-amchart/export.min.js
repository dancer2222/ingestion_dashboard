AmCharts.translations.export||(AmCharts.translations.export={}),AmCharts.translations.export.en||(AmCharts.translations.export.en={"fallback.save.text":"CTRL + C to copy the data into the clipboard.","fallback.save.image":"Rightclick -> Save picture as... to save the image.","capturing.delayed.menu.label":"{{duration}}","capturing.delayed.menu.title":"Click to cancel","menu.label.print":"Print","menu.label.undo":"Undo","menu.label.redo":"Redo","menu.label.cancel":"Cancel","menu.label.save.image":"Download as ...","menu.label.save.data":"Save as ...","menu.label.draw":"Annotate ...","menu.label.draw.change":"Change ...","menu.label.draw.add":"Add ...","menu.label.draw.shapes":"Shape ...","menu.label.draw.colors":"Color ...","menu.label.draw.widths":"Size ...","menu.label.draw.opacities":"Opacity ...","menu.label.draw.text":"Text","menu.label.draw.modes":"Mode ...","menu.label.draw.modes.pencil":"Pencil","menu.label.draw.modes.line":"Line","menu.label.draw.modes.arrow":"Arrow","label.saved.from":"Saved from: "}),AmCharts.export=function(v,e){var t,x={name:"export",version:"1.4.73",libs:{async:!0,autoLoad:!0,reload:!1,resources:["fabric.js/fabric.min.js","FileSaver.js/FileSaver.min.js",{"jszip/jszip.min.js":["xlsx/xlsx.min.js"],"pdfmake/pdfmake.min.js":["pdfmake/vfs_fonts.js"]}],namespaces:{"pdfmake.min.js":"pdfMake","jszip.min.js":"JSZip","xlsx.min.js":"XLSX","fabric.min.js":"fabric","FileSaver.min.js":"saveAs"},loadTimeout:1e4,unsupportedIE9libs:["pdfmake.min.js","jszip.min.js","xlsx.min.js"]},config:{},setup:{chart:v,hasBlob:!1,wrapper:!1,isIE:!!window.document.documentMode,IEversion:window.document.documentMode,hasTouch:"object"==typeof window.Touch,focusedMenuItem:void 0,hasClasslist:"classList"in document.createElement("_")},drawing:{enabled:!1,undos:[],redos:[],buffer:{position:{x1:0,y1:0,x2:0,y2:0,xD:0,yD:0}},handler:{undo:function(e,t){var a=x.drawing.undos.pop();if(a){a.selectable=!0,x.drawing.redos.push(a),"added"==a.action&&x.setup.fabric.remove(a.target);var i=JSON.parse(a.state);a.target.set(i),a.target instanceof fabric.Group&&x.drawing.handler.change({color:i.cfg.color,width:i.cfg.width,opacity:i.cfg.opacity},!0,a.target),x.setup.fabric.renderAll()}},redo:function(e,t){var a=x.drawing.redos.pop();if(a){a.selectable=!0,x.drawing.undos.push(a),"added"==a.action&&x.setup.fabric.add(a.target);var i=JSON.parse(a.state);a.target.recentState=a.state,a.target.set(i),a.target instanceof fabric.Group&&x.drawing.handler.change({color:i.cfg.color,width:i.cfg.width,opacity:i.cfg.opacity},!0,a.target),x.setup.fabric.renderAll()}},done:function(e){x.drawing.enabled=!1,x.drawing.buffer.enabled=!1,x.drawing.undos=[],x.drawing.redos=[],x.createMenu(x.config.menu),x.setup.fabric.deactivateAll(),x.isElement(x.setup.wrapper)&&x.isElement(x.setup.wrapper.parentNode)&&x.setup.wrapper.parentNode.removeChild&&(x.setup.wrapper.parentNode.removeChild(x.setup.wrapper),x.setup.wrapper=!1)},add:function(e){var r=x.deepMerge({top:x.setup.fabric.height/2,left:x.setup.fabric.width/2},e||{});(-1!=r.url.indexOf(".svg")?fabric.loadSVGFromURL:fabric.Image.fromURL)(r.url,function(e,t){var a=void 0!==t?fabric.util.groupSVGElements(e,t):e,i=!1;(a.height>x.setup.fabric.height||a.width>x.setup.fabric.width)&&(i=x.setup.fabric.height/2/a.height),r.top>x.setup.fabric.height&&(r.top=x.setup.fabric.height/2),r.left>x.setup.fabric.width&&(r.left=x.setup.fabric.width/2),x.drawing.buffer.isDrawing=!0,a.set({originX:"center",originY:"center",top:r.top,left:r.left,width:i?a.width*i:a.width,height:i?a.height*i:a.height,fill:x.drawing.color}),x.setup.fabric.add(a)})},change:function(e,t,a){var i,r,n,o=x.deepMerge({},e||{}),s=a||x.drawing.buffer.target,l=s?s._objects?s._objects:[s]:null;if(o.mode&&(x.drawing.mode=o.mode),o.width&&(x.drawing.width=o.width,x.drawing.fontSize=o.fontSize=3*o.width,1==x.drawing.width&&(x.drawing.fontSize=o.fontSize=x.defaults.fabric.drawing.fontSize)),o.fontSize&&(x.drawing.fontSize=o.fontSize),o.color&&(x.drawing.color=o.color),o.opacity&&(x.drawing.opacity=o.opacity),(n=x.getRGBA(x.drawing.color)).pop(),n.push(x.drawing.opacity),x.drawing.color="rgba("+n.join()+")",x.setup.fabric.freeDrawingBrush.color=x.drawing.color,x.setup.fabric.freeDrawingBrush.width=x.drawing.width,s){for((i=JSON.parse(s.recentState).cfg)&&(o.color=o.color||i.color,o.width=o.width||i.width,o.opacity=o.opacity||i.opacity,o.fontSize=o.fontSize||i.fontSize,(n=x.getRGBA(o.color)).pop(),n.push(o.opacity),o.color="rgba("+n.join()+")"),r=0;r<l.length;r++)l[r]instanceof fabric.Text||l[r]instanceof fabric.PathGroup||l[r]instanceof fabric.Triangle?((o.color||o.opacity)&&l[r].set({fill:o.color}),o.fontSize&&l[r].set({fontSize:o.fontSize})):(l[r]instanceof fabric.Path||l[r]instanceof fabric.Line)&&(s instanceof fabric.Group?(o.color||o.opacity)&&l[r].set({stroke:o.color}):((o.color||o.opacity)&&l[r].set({stroke:o.color}),o.width&&l[r].set({strokeWidth:o.width})));t||(i=JSON.stringify(x.deepMerge(s.saveState()._stateProperties,{cfg:{color:o.color,width:o.width,opacity:o.opacity}})),s.recentState=i,x.drawing.redos=[],x.drawing.undos.push({action:"modified",target:s,state:i})),x.setup.fabric.renderAll()}},text:function(e){var t=x.deepMerge({text:x.i18l("menu.label.draw.text"),top:x.setup.fabric.height/2,left:x.setup.fabric.width/2,fontSize:x.drawing.fontSize,fontFamily:x.setup.chart.fontFamily||"Verdana",fill:x.drawing.color},e||{});t.click=function(){};var a=new fabric.IText(t.text,t);return x.drawing.buffer.isDrawing=!0,x.setup.fabric.add(a),x.setup.fabric.setActiveObject(a),a.selectAll(),a.enterEditing(),a},line:function(e){var t,a,i,r,n=x.deepMerge({x1:x.setup.fabric.width/2-x.setup.fabric.width/10,x2:x.setup.fabric.width/2+x.setup.fabric.width/10,y1:x.setup.fabric.height/2,y2:x.setup.fabric.height/2,angle:90,strokeLineCap:x.drawing.lineCap,arrow:x.drawing.arrow,color:x.drawing.color,width:x.drawing.width,group:[]},e||{}),o=new fabric.Line([n.x1,n.y1,n.x2,n.y2],{stroke:n.color,strokeWidth:n.width,strokeLineCap:n.strokeLineCap});if(n.group.push(o),n.arrow&&(n.angle=n.angle?n.angle:x.getAngle(n.x1,n.y1,n.x2,n.y2),"start"==n.arrow?(i=n.y1+n.width/2,r=n.x1+n.width/2):"middle"==n.arrow?(i=n.y2+n.width/2-(n.y2-n.y1)/2,r=n.x2+n.width/2-(n.x2-n.x1)/2):(i=n.y2+n.width/2,r=n.x2+n.width/2),a=new fabric.Triangle({top:i,left:r,fill:n.color,height:7*n.width,width:7*n.width,angle:n.angle,originX:"center",originY:"bottom"}),n.group.push(a)),x.drawing.buffer.isDrawing=!0,"config"!=n.action){if(n.arrow){var s=new fabric.Group(n.group);return s.set({cfg:n,fill:n.color,action:n.action,selectable:!0,known:"change"==n.action}),"change"==n.action&&x.setup.fabric.setActiveObject(s),x.setup.fabric.add(s),s}return x.setup.fabric.add(o),o}for(t=0;t<n.group.length;t++)n.group[t].ignoreUndo=!0,x.setup.fabric.add(n.group[t]);return n}}},defaults:{position:"top-right",fileName:"amCharts",action:"download",overflow:!0,path:(v.path||"")+"plugins/export/",formats:{JPG:{mimeType:"image/jpg",extension:"jpg",capture:!0},PNG:{mimeType:"image/png",extension:"png",capture:!0},SVG:{mimeType:"text/xml",extension:"svg",capture:!0},PDF:{mimeType:"application/pdf",extension:"pdf",capture:!0},CSV:{mimeType:"text/plain",extension:"csv"},JSON:{mimeType:"text/plain",extension:"json"},XLSX:{mimeType:"application/octet-stream",extension:"xlsx"}},fabric:{backgroundColor:"#FFFFFF",removeImages:!0,forceRemoveImages:!1,selection:!1,loadTimeout:5e3,drawing:{enabled:!0,arrow:"end",lineCap:"butt",mode:"pencil",modes:["pencil","line","arrow"],color:"#000000",colors:["#000000","#FFFFFF","#FF0000","#00FF00","#0000FF"],shapes:["11.svg","14.svg","16.svg","17.svg","20.svg","27.svg"],width:1,fontSize:11,widths:[1,5,10,15],opacity:1,opacities:[1,.8,.6,.4,.2],menu:void 0,autoClose:!0},border:{fill:"",fillOpacity:0,stroke:"#000000",strokeWidth:1,strokeOpacity:1}},pdfMake:{images:{},pageOrientation:"portrait",pageMargins:40,pageOrigin:!0,pageSize:"A4",pageSizes:{"4A0":[4767.87,6740.79],"2A0":[3370.39,4767.87],A0:[2383.94,3370.39],A1:[1683.78,2383.94],A2:[1190.55,1683.78],A3:[841.89,1190.55],A4:[595.28,841.89],A5:[419.53,595.28],A6:[297.64,419.53],A7:[209.76,297.64],A8:[147.4,209.76],A9:[104.88,147.4],A10:[73.7,104.88],B0:[2834.65,4008.19],B1:[2004.09,2834.65],B2:[1417.32,2004.09],B3:[1000.63,1417.32],B4:[708.66,1000.63],B5:[498.9,708.66],B6:[354.33,498.9],B7:[249.45,354.33],B8:[175.75,249.45],B9:[124.72,175.75],B10:[87.87,124.72],C0:[2599.37,3676.54],C1:[1836.85,2599.37],C2:[1298.27,1836.85],C3:[918.43,1298.27],C4:[649.13,918.43],C5:[459.21,649.13],C6:[323.15,459.21],C7:[229.61,323.15],C8:[161.57,229.61],C9:[113.39,161.57],C10:[79.37,113.39],RA0:[2437.8,3458.27],RA1:[1729.13,2437.8],RA2:[1218.9,1729.13],RA3:[864.57,1218.9],RA4:[609.45,864.57],SRA0:[2551.18,3628.35],SRA1:[1814.17,2551.18],SRA2:[1275.59,1814.17],SRA3:[907.09,1275.59],SRA4:[637.8,907.09],EXECUTIVE:[521.86,756],FOLIO:[612,936],LEGAL:[612,1008],LETTER:[612,792],TABLOID:[792,1224]}},menu:void 0,divId:null,menuReviver:null,menuWalker:null,fallback:!0,keyListener:!0,fileListener:!0,compress:!0,debug:!1},listenersToRemove:[],i18l:function(e,t){var a=t||(x.setup.chart.language?x.setup.chart.language:"en");return(AmCharts.translations[x.name][a]||AmCharts.translations[x.name].en)[e]||e},download:function(e,t,a){if(window.saveAs&&x.setup.hasBlob)x.toBlob({data:e,type:t},function(e){saveAs(e,a)});else if(x.config.fallback&&"text/plain"==t){var i=document.createElement("div"),r=document.createElement("div"),n=document.createElement("textarea");r.innerHTML=x.i18l("fallback.save.text"),i.appendChild(r),i.appendChild(n),r.setAttribute("class","amcharts-export-fallback-message"),i.setAttribute("class","amcharts-export-fallback"),x.setup.chart.containerDiv.appendChild(i),n.setAttribute("readonly",""),n.value=e,n.focus(),n.select(),x.createMenu([{class:"export-main export-close",label:"Done",click:function(){x.createMenu(x.config.menu),x.isElement(x.setup.chart.containerDiv)&&x.setup.chart.containerDiv.removeChild(i)}}])}else{if(!x.config.fallback||"image"!=t.split("/")[0])throw new Error("Unable to create file. Ensure saveAs (FileSaver.js) is supported.");i=document.createElement("div"),r=document.createElement("div");var o=x.toImage({data:e});r.innerHTML=x.i18l("fallback.save.image"),i.appendChild(r),i.appendChild(o),r.setAttribute("class","amcharts-export-fallback-message"),i.setAttribute("class","amcharts-export-fallback"),x.setup.chart.containerDiv.appendChild(i),x.createMenu([{class:"export-main export-close",label:"Done",click:function(){x.createMenu(x.config.menu),x.isElement(x.setup.chart.containerDiv)&&x.setup.chart.containerDiv.removeChild(i)}}])}return e},loadResource:function(e,t){function a(){x.handleLog(["amCharts[export]: Loading error on ",this.src||this.href].join(""))}function i(){if(t)for(r=0;r<t.length;r++)x.loadResource(t[r])}var r,n,o,s=-1!=e.indexOf("//")?e:[x.libs.path,e].join("");for(-1!=e.indexOf(".js")?((o=document.createElement("script")).setAttribute("type","text/javascript"),o.setAttribute("src",s),x.libs.async&&o.setAttribute("async","")):-1!=e.indexOf(".css")&&((o=document.createElement("link")).setAttribute("type","text/css"),o.setAttribute("rel","stylesheet"),o.setAttribute("href",s)),r=0;r<document.head.childNodes.length;r++)if(d=!!(c=document.head.childNodes[r])&&(c.src||c.href),!!c&&c.tagName,c&&d&&-1!=d.indexOf(e)){x.libs.reload&&document.head.removeChild(c),n=!0;break}for(r in x.libs.namespaces){var l=x.libs.namespaces[r],d=e.toLowerCase(),c=r.toLowerCase();if(-1!=d.indexOf(c)){if(x.setup.isIE&&x.setup.IEversion<=9&&x.libs.unsupportedIE9libs&&-1!=x.libs.unsupportedIE9libs.indexOf(c))return;if(void 0!==window[l]){n=!0;break}}}n&&!x.libs.reload||(o.addEventListener("load",i),x.addListenerToRemove("load",o,i),o.addEventListener("error",a),x.addListenerToRemove("error",o,a),document.head.appendChild(o))},addListenerToRemove:function(e,t,a){x.listenersToRemove.push({node:t,method:a,event:e})},loadDependencies:function(){var e,t;if(x.libs.autoLoad)for(e=0;e<x.libs.resources.length;e++)if(x.libs.resources[e]instanceof Object)for(t in x.libs.resources[e])x.loadResource(t,x.libs.resources[e][t]);else x.loadResource(x.libs.resources[e])},pxToNumber:function(e,t){if(e||!t)return Number(String(e).replace("px",""))||0},numberToPx:function(e){return String(e)+"px"},cloneObject:function(e){var t,a,i,r,n;for(i in t=Array.isArray(e)?[]:{},e)r="object"==typeof(a=e[i]),n=a instanceof Date,t[i]=r&&!n?x.cloneObject(a):a;return t},deepMerge:function(e,t,a){var i,r,n=t instanceof Array?"array":"object";if(!(e instanceof Object||e instanceof Array))return e;for(i in t)"array"==n&&isNaN(i)||(r=t[i],(e&&null==e[i]||a)&&(r instanceof Array?e[i]=new Array:r instanceof Function?e[i]=function(){}:r instanceof Date?e[i]=new Date:r instanceof Object?e[i]=new Object:r instanceof Number?e[i]=new Number:r instanceof String&&(e[i]=new String)),(r instanceof Object||r instanceof Array)&&!(r instanceof Function||r instanceof Date||x.isElement(r))&&"chart"!=i&&"scope"!=i?x.deepMerge(e[i],r,a):e instanceof Array&&!a?e.push(r):e&&(e[i]=r));return e},isElement:function(e){return e instanceof Object&&e&&1===e.nodeType},isHashbanged:function(e){var t=String(e).replace(/\"/g,"");return"url"==t.slice(0,3)&&t.slice(t.indexOf("#")+1,t.length-1)},isPressed:function(e){return"mousemove"==e.type&&1===e.which||("touchmove"==e.type||1===e.buttons||1===e.button||1===e.which?x.drawing.buffer.isPressed=!0:x.drawing.buffer.isPressed=!1),x.drawing.buffer.isPressed},removeImage:function(e){if(e){if(x.config.fabric.forceRemoveImages)return!0;if(x.config.fabric.removeImages&&x.isTainted(e))return!0;if(x.setup.isIE&&(10==x.setup.IEversion||11==x.setup.IEversion)&&-1!=e.toLowerCase().indexOf(".svg"))return!0}return!1},isTainted:function(e){var t=String(window.location.origin||window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:""));if(e){if(-1!=t.indexOf(":\\")||-1!=e.indexOf(":\\")||-1!=t.indexOf("file://")||-1!=e.indexOf("file://"))return!0;if(-1!=e.indexOf("//")&&-1==e.indexOf(t.replace(/.*:/,"")))return!0}return!1},isSupported:function(){return!(!x.config.enabled||x.setup.isIE&&x.setup.IEversion<=9&&(!Array.prototype.indexOf||!document.head||!1===x.config.fallback))},getAngle:function(e,t,a,i){var r=a-e,n=i-t;return 180*(0==r?0==n?0:0<n?Math.PI/2:3*Math.PI/2:0==n?0<r?0:Math.PI:r<0?Math.atan(n/r)+Math.PI:n<0?Math.atan(n/r)+2*Math.PI:Math.atan(n/r))/Math.PI},gatherAttribute:function(e,t,a,i){var r;i=i||0,a=a||3;return e&&!(r=e.getAttribute(t))&&i<a?x.gatherAttribute(e.parentNode,t,a,i+1):r},gatherClassName:function(e,t,a,i){var r;i=i||0,a=a||3;if(x.isElement(e)){if(!(r=-1!=(e.getAttribute("class")||"").split(" ").indexOf(t))&&i<a)return x.gatherClassName(e.parentNode,t,a,i+1);r&&(r=e)}return r},gatherElements:function(e,t,a){var i,r;for(i=0;i<e.children.length;i++){var n=e.children[i];if("clipPath"==n.tagName){var o={},s=fabric.parseTransformAttribute(x.gatherAttribute(n,"transform"));for(r=0;r<n.childNodes.length;r++)n.childNodes[r].setAttribute("fill","transparent"),o={x:x.pxToNumber(n.childNodes[r].getAttribute("x")),y:x.pxToNumber(n.childNodes[r].getAttribute("y")),width:x.pxToNumber(n.childNodes[r].getAttribute("width")),height:x.pxToNumber(n.childNodes[r].getAttribute("height"))};e.clippings[n.id]={svg:n,bbox:o,transform:s}}else if("pattern"==n.tagName){var l={node:n,source:n.getAttribute("xlink:href"),width:Number(n.getAttribute("width")),height:Number(n.getAttribute("height")),repeat:"repeat",offsetX:0,offsetY:0};for(r=0;r<n.childNodes.length;r++)"rect"==n.childNodes[r].tagName?l.fill=n.childNodes[r].getAttribute("fill"):"image"==n.childNodes[r].tagName&&(d=fabric.parseAttributes(n.childNodes[r],fabric.SHARED_ATTRIBUTES)).transformMatrix&&(l.offsetX=d.transformMatrix[4],l.offsetY=d.transformMatrix[5]);x.removeImage(l.source)?e.patterns[n.id]=l.fill?l.fill:"transparent":e.patterns[l.node.id]=l}else if("image"==n.tagName)a.included++,fabric.Image.fromURL(n.getAttribute("xlink:href"),function(e){a.loaded++});else{var d=["fill","stroke"];for(r=0;r<d.length;r++){var c=d[r],p=n.getAttribute(c),f=x.getRGBA(p),u=x.isHashbanged(p);!p||f||u||(n.setAttribute(c,"none"),n.setAttribute(c+"-opacity","0"))}}}return e},getRGBA:function(e,t){return!("none"==e||"transparent"==e||x.isHashbanged(e)||!(e=new fabric.Color(e))._source)&&(t?e:e.getSource())},gatherPosition:function(e,t){var a,i=x.drawing.buffer.position,r=fabric.util.invertTransform(x.setup.fabric.viewportTransform);return"touchmove"==e.type&&("touches"in e?e=e.touches[0]:"changedTouches"in e&&(e=e.changedTouches[0])),a=fabric.util.transformPoint(x.setup.fabric.getPointer(e,!0),r),1==t&&(i.x1=a.x,i.y1=a.y),i.x2=a.x,i.y2=a.y,i.xD=i.x1-i.x2<0?-1*(i.x1-i.x2):i.x1-i.x2,i.yD=i.y1-i.y2<0?-1*(i.y1-i.y2):i.y1-i.y2,i},modifyFabric:function(){fabric.ElementsParser.prototype.resolveGradient=function(e,t){var a=e.get(t);if(/^url\(/.test(a)){var i=a.slice(a.indexOf("#")+1,a.length-1);if(fabric.gradientDefs[this.svgUid][i]){var r=fabric.Gradient.fromElement(fabric.gradientDefs[this.svgUid][i],e);r.coords.y1&&"pie"!=x.setup.chart.type&&(r.coords.y2=-1*r.coords.y1,r.coords.y1=0),e.set(t,r)}}},fabric.Text.fromElement=function(e,t){if(!e)return null;var a=fabric.parseAttributes(e,fabric.Text.ATTRIBUTE_NAMES);(t=fabric.util.object.extend(t?fabric.util.object.clone(t):{},a)).top=t.top||0,t.left=t.left||0,"dx"in a&&(t.left+=a.dx),"dy"in a&&(t.top+=a.dy),"fontSize"in t||(t.fontSize=fabric.Text.DEFAULT_SVG_FONT_SIZE),t.originX||(t.originX="left");var i,r=[];if("textContent"in e)if(e.childNodes)for(var n=0;n<e.childNodes.length;n++)r.push(e.childNodes[n].textContent);else r.push(e.textContent);else"firstChild"in e&&null!==e.firstChild&&"data"in e.firstChild&&null!==e.firstChild.data&&r.push(e.firstChild.data);i=r.join("\n");var o=new fabric.Text(i,t),s=0;return"left"===o.originX&&(s=o.getWidth()/2),"right"===o.originX&&(s=-o.getWidth()/2),1<r.length?o.set({left:o.getLeft()+s,top:o.getTop()+o.fontSize*(r.length-1)*(.18+o._fontSizeFraction),textAlign:t.originX,lineHeight:1<r.length?.965:1.16}):o.set({left:o.getLeft()+s,top:o.getTop()-o.getHeight()/2+o.fontSize*(.18+o._fontSizeFraction)}),o}},capture:function(e,m){var o,b=x.deepMerge(x.deepMerge({},x.config.fabric),e||{}),v=[],w={x:0,y:0,pX:0,pY:0,lX:0,lY:0,width:x.setup.chart.divRealWidth,height:x.setup.chart.divRealHeight},y={loaded:0,included:0},t={items:[],width:0,height:0,maxWidth:0,maxHeight:0};if(!x.handleNamespace("fabric",{scope:this,cb:x.capture,args:arguments}))return!1;x.modifyFabric(),x.handleCallback(b.beforeCapture,b);var a=x.setup.chart.containerDiv.getElementsByTagName("svg");for(o=0;o<a.length;o++)(r={svg:a[o],parent:a[o].parentNode,children:a[o].getElementsByTagName("*"),offset:{x:0,y:0},patterns:{},clippings:{},has:{legend:!1,panel:!1,scrollbar:!1}}).has.legend=x.gatherClassName(r.parent,x.setup.chart.classNamePrefix+"-legend-div",1),r.has.panel=x.gatherClassName(r.parent,x.setup.chart.classNamePrefix+"-stock-panel-div"),r.has.scrollbar=x.gatherClassName(r.parent,x.setup.chart.classNamePrefix+"-scrollbar-chart-div"),r=x.gatherElements(r,b,y),v.push(r);if(x.config.legend){if("stock"==x.setup.chart.type)for(o=0;o<x.setup.chart.panels.length;o++)x.setup.chart.panels[o].stockLegend&&x.setup.chart.panels[o].stockLegend.divId&&t.items.push(x.setup.chart.panels[o].stockLegend);else x.setup.chart.legend&&x.setup.chart.legend.divId&&t.items.push(x.setup.chart.legend);for(o=0;o<t.items.length;o++){var i=t.items[o],r={svg:i.container.container,parent:i.container.container.parentNode,children:i.container.container.getElementsByTagName("*"),offset:{x:0,y:0},legend:{id:o,type:-1!=["top","left"].indexOf(x.config.legend.position)?"unshift":"push",position:x.config.legend.position,width:x.config.legend.width?x.config.legend.width:i.container.div.offsetWidth,height:x.config.legend.height?x.config.legend.height:i.container.div.offsetHeight},patterns:{},clippings:{},has:{legend:!1,panel:!1,scrollbar:!1}};t.width+=r.legend.width,t.height+=r.legend.height,t.maxWidth=r.legend.width>t.maxWidth?r.legend.width:t.maxWidth,t.maxHeight=r.legend.height>t.maxHeight?r.legend.height:t.maxHeight,r=x.gatherElements(r,b,y),v[r.legend.type](r)}-1!=["top","bottom"].indexOf(x.config.legend.position)?(w.width=t.maxWidth>w.width?t.maxWidth:w.width,w.height+=t.height):-1!=["left","right"].indexOf(x.config.legend.position)?(w.width+=t.maxWidth,w.height=t.height>w.height?t.height:w.height):(w.height+=t.height,w.width+=t.maxWidth)}if(x.drawing.enabled=b.drawing.enabled="draw"==b.action,x.drawing.buffer.enabled=x.drawing.enabled,x.setup.wrapper=document.createElement("div"),x.setup.wrapper.setAttribute("class",x.setup.chart.classNamePrefix+"-export-canvas"),x.setup.chart.containerDiv.appendChild(x.setup.wrapper),"stock"==x.setup.chart.type){var n={top:0,right:0,bottom:0,left:0};x.setup.chart.leftContainer&&(w.width-=x.setup.chart.leftContainer.offsetWidth,n.left=x.setup.chart.leftContainer.offsetWidth+2*x.setup.chart.panelsSettings.panelSpacing),x.setup.chart.rightContainer&&(w.width-=x.setup.chart.rightContainer.offsetWidth,n.right=x.setup.chart.rightContainer.offsetWidth+2*x.setup.chart.panelsSettings.panelSpacing),x.setup.chart.periodSelector&&-1!=["top","bottom"].indexOf(x.setup.chart.periodSelector.position)&&(w.height-=x.setup.chart.periodSelector.offsetHeight+x.setup.chart.panelsSettings.panelSpacing,n[x.setup.chart.periodSelector.position]+=x.setup.chart.periodSelector.offsetHeight+x.setup.chart.panelsSettings.panelSpacing),x.setup.chart.dataSetSelector&&-1!=["top","bottom"].indexOf(x.setup.chart.dataSetSelector.position)&&(w.height-=x.setup.chart.dataSetSelector.offsetHeight,n[x.setup.chart.dataSetSelector.position]+=x.setup.chart.dataSetSelector.offsetHeight),x.setup.wrapper.style.paddingTop=x.numberToPx(n.top),x.setup.wrapper.style.paddingRight=x.numberToPx(n.right),x.setup.wrapper.style.paddingBottom=x.numberToPx(n.bottom),x.setup.wrapper.style.paddingLeft=x.numberToPx(n.left)}x.setup.canvas=document.createElement("canvas"),x.setup.wrapper.appendChild(x.setup.canvas);var s=x.removeFunctionsFromObject(x.deepMerge({width:w.width,height:w.height,isDrawingMode:!0},b));for(x.setup.fabric=new fabric.Canvas(x.setup.canvas,s),x.deepMerge(x.setup.fabric,b),x.deepMerge(x.setup.fabric.freeDrawingBrush,b.drawing),x.deepMerge(x.drawing,b.drawing),x.drawing.handler.change(b.drawing),x.setup.fabric.on("mouse:down",function(e){x.gatherPosition(e.e,1),x.drawing.buffer.pressedTS=Number(new Date),x.isPressed(e.e),x.drawing.buffer.isDrawing=!1,x.drawing.buffer.isDrawingTimer=setTimeout(function(){x.drawing.buffer.isSelected||(x.drawing.buffer.isDrawing=!0)},200)}),x.setup.fabric.on("mouse:move",function(e){var t=x.gatherPosition(e.e,2);if(x.isPressed(e.e),x.drawing.buffer.isPressed&&!x.drawing.buffer.isSelected&&(x.drawing.buffer.isDrawing=!0,!x.drawing.buffer.line&&"pencil"!=x.drawing.mode&&(5<t.xD||5<t.yD)&&(x.setup.fabric.isDrawingMode=!1,x.setup.fabric._isCurrentlyDrawing=!1,x.drawing.buffer.ignoreUndoOnMouseUp=!0,x.setup.fabric.freeDrawingBrush.onMouseUp(),x.setup.fabric.remove(x.setup.fabric._objects.pop()),x.drawing.buffer.line=x.drawing.handler.line({x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,arrow:"line"!=x.drawing.mode&&x.drawing.arrow,action:"config"}))),x.drawing.buffer.isSelected&&(x.setup.fabric.isDrawingMode=!1),x.drawing.buffer.line){var a,i,r,n=x.drawing.buffer.line;for(n.x2=t.x2,n.y2=t.y2,o=0;o<n.group.length;o++)(a=n.group[o])instanceof fabric.Line?a.set({x2:n.x2,y2:n.y2}):a instanceof fabric.Triangle&&(n.angle=x.getAngle(n.x1,n.y1,n.x2,n.y2)+90,"start"==n.arrow?(i=n.y1+n.width/2,r=n.x1+n.width/2):"middle"==n.arrow?(i=n.y2+n.width/2-(n.y2-n.y1)/2,r=n.x2+n.width/2-(n.x2-n.x1)/2):(i=n.y2+n.width/2,r=n.x2+n.width/2),a.set({top:i,left:r,angle:n.angle}));x.setup.fabric.renderAll()}}),x.setup.fabric.on("mouse:up",function(e){if(!x.drawing.buffer.isDrawing){var t=x.setup.fabric.findTarget(e.e);t&&t.selectable&&x.setup.fabric.setActiveObject(t)}if(x.drawing.buffer.line){for(o=0;o<x.drawing.buffer.line.group.length;o++)x.drawing.buffer.line.group[o].remove();delete x.drawing.buffer.line.action,delete x.drawing.buffer.line.group,x.drawing.handler.line(x.drawing.buffer.line)}x.drawing.buffer.line=!1,x.drawing.buffer.hasLine=!1,x.drawing.buffer.isPressed=!1,clearTimeout(x.drawing.buffer.isDrawingTimer),x.drawing.buffer.isDrawing=!1}),x.setup.fabric.on("object:selected",function(e){x.drawing.buffer.isSelected=!0,x.drawing.buffer.target=e.target,x.setup.fabric.isDrawingMode=!1}),x.setup.fabric.on("selection:cleared",function(e){x.drawing.buffer.target=!1,x.drawing.buffer.isSelected&&(x.setup.fabric._isCurrentlyDrawing=!1),x.drawing.buffer.isSelected=!1,x.setup.fabric.isDrawingMode=!0}),x.setup.fabric.on("path:created",function(e){var t=e.path;if(!x.drawing.buffer.isDrawing||x.drawing.buffer.hasLine)return x.setup.fabric.remove(t),void x.setup.fabric.renderAll()}),x.setup.fabric.on("object:added",function(e){var t=e.target,a=x.deepMerge(t.saveState()._stateProperties,{cfg:{color:x.drawing.color,width:x.drawing.width,opacity:x.drawing.opacity,fontSize:x.drawing.fontSize}});a=JSON.stringify(a),t.recentState=a,!x.drawing.buffer.ignoreUndoOnMouseUp&&x.drawing.buffer.isDrawing?(!t.selectable||t.known||t.ignoreUndo||(t.isAnnotation=!0,x.drawing.undos.push({action:"added",target:t,state:a}),x.drawing.redos=[]),t.known=!0,x.setup.fabric.isDrawingMode=!0):x.drawing.buffer.ignoreUndoOnMouseUp=!1}),x.setup.fabric.on("object:modified",function(e){var t=e.target,a=JSON.parse(t.recentState),i=x.deepMerge(t.saveState()._stateProperties,{cfg:a.cfg});i=JSON.stringify(i),t.recentState=i,x.drawing.undos.push({action:"modified",target:t,state:i}),x.drawing.redos=[]}),x.setup.fabric.on("text:changed",function(e){var t=e.target;clearTimeout(t.timer),t.timer=setTimeout(function(){var e=JSON.stringify(t.saveState()._stateProperties);t.recentState=e,x.drawing.redos=[],x.drawing.undos.push({action:"modified",target:t,state:e})},250)}),x.drawing.enabled?(x.setup.wrapper.setAttribute("class",x.setup.chart.classNamePrefix+"-export-canvas active"),x.setup.wrapper.style.backgroundColor=b.backgroundColor,x.setup.wrapper.style.display="block"):(x.setup.wrapper.setAttribute("class",x.setup.chart.classNamePrefix+"-export-canvas"),x.setup.wrapper.style.display="none"),o=0;o<v.length;o++)r=v[o],"stock"==x.setup.chart.type&&x.setup.chart.legendSettings.position?-1!=["top","bottom"].indexOf(x.setup.chart.legendSettings.position)?r.parent.style.top&&r.parent.style.left?(r.offset.y=x.pxToNumber(r.parent.style.top),r.offset.x=x.pxToNumber(r.parent.style.left)):(r.offset.x=w.x,r.offset.y=w.y,w.y+=x.pxToNumber(r.parent.style.height),r.has.panel?(w.pY=x.pxToNumber(r.has.panel.style.marginTop),r.offset.y+=w.pY):r.has.scrollbar&&(r.offset.y+=w.pY)):-1!=["left","right"].indexOf(x.setup.chart.legendSettings.position)&&(r.offset.y=x.pxToNumber(r.parent.style.top)+w.pY,r.offset.x=x.pxToNumber(r.parent.style.left)+w.pX,r.has.legend?w.pY+=x.pxToNumber(r.has.panel.style.height)+x.setup.chart.panelsSettings.panelSpacing:r.has.scrollbar&&(r.offset.y-=x.setup.chart.panelsSettings.panelSpacing)):("absolute"==r.parent.style.position?(r.offset.absolute=!0,r.offset.top=x.pxToNumber(r.parent.style.top),r.offset.right=x.pxToNumber(r.parent.style.right,!0),r.offset.bottom=x.pxToNumber(r.parent.style.bottom,!0),r.offset.left=x.pxToNumber(r.parent.style.left),r.offset.width=x.pxToNumber(r.parent.style.width),r.offset.height=x.pxToNumber(r.parent.style.height)):r.parent.style.top&&r.parent.style.left?(r.offset.y=x.pxToNumber(r.parent.style.top),r.offset.x=x.pxToNumber(r.parent.style.left)):r.legend?("left"==r.legend.position?w.x=t.maxWidth:"right"==r.legend.position?r.offset.x=w.width-t.maxWidth:"top"==r.legend.position?w.y+=r.legend.height:"bottom"==r.legend.position&&(r.offset.y=w.height-t.height),r.offset.y+=w.lY,w.lY+=r.legend.height):(r.offset.x=w.x,r.offset.y=w.y+w.pY,w.y+=x.pxToNumber(r.parent.style.height)),r.has.legend&&r.has.panel&&r.has.panel.style.marginTop?(w.y+=x.pxToNumber(r.has.panel.style.marginTop),r.offset.y+=x.pxToNumber(r.has.panel.style.marginTop)):x.setup.chart.legend&&-1!=["left","right"].indexOf(x.setup.chart.legend.position)&&(r.offset.y=x.pxToNumber(r.parent.style.top),r.offset.x=x.pxToNumber(r.parent.style.left))),fabric.parseSVGDocument(r.svg,function(h){return function(e,t){var a,o=fabric.util.groupSVGElements(e,t),i=[],r={selectable:!1,isCoreElement:!0};for(h.offset.absolute?(void 0!==h.offset.bottom?r.top=w.height-h.offset.height-h.offset.bottom:r.top=h.offset.top,void 0!==h.offset.right?r.left=w.width-h.offset.width-h.offset.right:r.left=h.offset.left):(r.top=h.offset.y,r.left=h.offset.x),a=0;a<o.paths.length;a++){var n=null;if(o.paths[a]){if(x.removeImage(o.paths[a]["xlink:href"]))continue;if(o.paths[a].fill instanceof Object)"radial"==o.paths[a].fill.type&&-1==["pie","gauge"].indexOf(x.setup.chart.type)&&(o.paths[a].fill.coords.r2=-1*o.paths[a].fill.coords.r1,o.paths[a].fill.coords.r1=0,o.paths[a].set({opacity:o.paths[a].fillOpacity}));else if((n=x.isHashbanged(o.paths[a].fill))&&h.patterns&&h.patterns[n]){var s=h.patterns[n];y.included++,fabric.Image.fromURL(s.source,function(i,r){return function(e){y.loaded++,e.set({top:i.offsetY,left:i.offsetX,width:i.width,height:i.height}),x.setup.fabric._isRetinaScaling()&&e.set({top:i.offsetY/2,left:i.offsetX/2,scaleX:.5,scaleY:.5});var t=new fabric.StaticCanvas(void 0,{backgroundColor:i.fill,width:e.getWidth(),height:e.getHeight()});t.add(e);var a=new fabric.Pattern({source:t.getElement(),offsetX:o.paths[r].width/2,offsetY:o.paths[r].height/2,repeat:"repeat"});o.paths[r].set({fill:a,opacity:o.paths[r].fillOpacity})}}(s,a))}(n=x.isHashbanged(o.paths[a].clipPath))&&h.clippings&&h.clippings[n]&&(function(e,a){var i=o.paths[e].toSVG;o.paths[e].toSVG=function(t){return i.apply(this,[function(e){return t(e,h.clippings[a])}])}}(a,n),o.paths[a].set({clipTo:function(r,n){return function(e){var t=h.clippings[n],a=this.transformMatrix||[1,0,0,1,0,0],i={top:t.bbox.y,left:t.bbox.x,width:t.bbox.width,height:t.bbox.height};"map"==x.setup.chart.type&&(i.top+=t.transform[5],i.left+=t.transform[4]),t.bbox.x&&a[4]&&t.bbox.y&&a[5]&&(i.top-=a[5],i.left-=a[4]),void 0!==x.setup.chart.smoothCustomBullets&&this.className==x.setup.chart.classNamePrefix+"-graph-bullet"&&"image"==o.paths[r].svg.tagName?(radius=t.svg.firstChild.rx.baseVal.value/2+2,e.beginPath(),e.moveTo(i.left+radius,i.top),e.lineTo(i.left+i.width-radius,i.top),e.quadraticCurveTo(i.left+i.width,i.top,i.left+i.width,i.top+radius),e.lineTo(i.left+i.width,i.top+i.height-radius),e.quadraticCurveTo(i.left+i.width,i.top+i.height,i.left+i.width-radius,i.top+i.height),e.lineTo(i.left+radius,i.top+i.height),e.quadraticCurveTo(i.left,i.top+i.height,i.left,i.top+i.height-radius),e.lineTo(i.left,i.top+radius),e.quadraticCurveTo(i.left,i.top,i.left+radius,i.top),e.closePath()):e.rect(i.left,i.top,i.width,i.height)}}(a,n)}))}i.push(o.paths[a])}if(o.paths=i,r.top+=.5,r.left+=.5,o.set(r),x.setup.fabric.add(o),h.svg.parentNode&&h.svg.parentNode.getElementsByTagName){var l=h.svg.parentNode.getElementsByClassName(x.setup.chart.classNamePrefix+"-balloon-div");for(a=0;a<l.length;a++)if(b.balloonFunction instanceof Function)b.balloonFunction.apply(x,[l[a],h]);else{var d=l[a],c=fabric.parseStyleAttribute(d),p=fabric.parseStyleAttribute(d.childNodes[0]),f=new fabric.Text(d.innerText||d.textContent||d.innerHTML,{selectable:!1,top:x.pxToNumber(c.top)+h.offset.y,left:x.pxToNumber(c.left)+h.offset.x,fill:p.color,fontSize:x.pxToNumber(p.fontSize||p["font-size"]),fontFamily:p.fontFamily||p["font-family"],textAlign:p["text-align"],isCoreElement:!0});x.setup.fabric.add(f)}}if(h.svg.nextSibling&&"A"==h.svg.nextSibling.tagName){d=h.svg.nextSibling,c=fabric.parseStyleAttribute(d),f=new fabric.Text(d.innerText||d.textContent||d.innerHTML,{selectable:!1,top:x.pxToNumber(c.top)+h.offset.y,left:x.pxToNumber(c.left)+h.offset.x,fill:c.color,fontSize:x.pxToNumber(c.fontSize||c["font-size"]),fontFamily:c.fontFamily||c["font-family"],opacity:c.opacity,isCoreElement:!0});h.has.scrollbar||x.setup.fabric.add(f)}if(v.pop(),!v.length)var u=Number(new Date),g=setInterval(function(){var e=Number(new Date);(y.loaded==y.included||e-u>x.config.fabric.loadTimeout)&&(clearTimeout(g),x.handleBorder(b),x.handleCallback(b.afterCapture,b),x.setup.fabric.renderAll(),x.handleCallback(m,b))},AmCharts.updateRate)}}(r),function(e,t){var a,i=x.gatherAttribute(e,"class"),r=x.gatherAttribute(e,"visibility"),n=x.gatherAttribute(e,"clip-path");t.className=String(i),t.classList=String(i).split(" "),t.clipPath=n,t.svg=e;var o=["fill","stroke"];for(a=0;a<o.length;a++){var s=o[a],l=String(e.getAttribute(s)||"none"),d=Number(e.getAttribute(s+"-opacity")||"1"),c=x.getRGBA(l);"hidden"==r&&(d=t.opacity=0),c&&(c.pop(),c.push(d),t[s]="rgba("+c.join()+")",t[s+x.capitalize("opacity")]=d)}x.handleCallback(b.reviver,t,e)})},toCanvas:function(e,t){var a=x.deepMerge({},e||{}),i=x.setup.canvas;return x.handleCallback(t,i,a),i},toImage:function(e,t){var a=x.deepMerge({format:"png",quality:1,multiplier:x.config.multiplier},e||{}),i=a.data,r=document.createElement("img");return!!x.handleNamespace("fabric",{scope:this,cb:x.toImage,args:arguments})&&(a.data||(i=a.lossless||"svg"==a.format?x.toSVG(x.deepMerge(a,{getBase64:!0})):x.setup.fabric.toDataURL(a)),r.setAttribute("src",i),x.handleCallback(t,r,a),r)},toBlob:function(e,t){var a,i=x.deepMerge({data:"empty",type:"text/plain"},e||{}),r=/^data:.+;base64,(.*)$/.exec(i.data);return r&&(i.data=r[0],i.type=i.data.slice(5,i.data.indexOf(",")-7),i.data=x.toByteArray({data:i.data.slice(i.data.indexOf(",")+1,i.data.length)})),a=i.getByteArray?i.data:new Blob([i.data],{type:i.type}),x.handleCallback(t,a,i),a},toJPG:function(e,t){var a,i=x.deepMerge({format:"jpeg",quality:1,multiplier:x.config.multiplier},e||{});return i.format=i.format.toLowerCase(),/iP(hone|od|ad)/.test(navigator.platform)&&(i.multiplier=1),!!x.handleNamespace("fabric",{scope:this,cb:x.toJPG,args:arguments})&&(a=x.setup.fabric.toDataURL(i),x.handleCallback(t,a,i),a)},toPNG:function(e,t){var a,i=x.deepMerge({format:"png",quality:1,multiplier:x.config.multiplier},e||{});return/iP(hone|od|ad)/.test(navigator.platform)&&(i.multiplier=1),!!x.handleNamespace("fabric",{scope:this,cb:x.toPNG,args:arguments})&&(a=x.setup.fabric.toDataURL(i),x.handleCallback(t,a,i),a)},toSVG:function(e,t){var a,b=[],v=[],i=x.deepMerge({compress:x.config.compress,reviver:function(e,t){var a=new RegExp(/\bstyle=(['"])(.*?)\1/).exec(e)[0].slice(7,-1),i=a.split(";"),r=[];for(i1=0;i1<i.length;i1++)if(i[i1]){var n=i[i1].replace(/\s/g,"").split(":"),o=n[0],s=n[1];if(-1!=["fill","stroke"].indexOf(o))if(s=x.getRGBA(s,!0)){var l="#"+s.toHex(),d=s._source[3];r.push([o,l].join(":")),r.push([o+"-opacity",d].join(":"))}else r.push(i[i1]);else"opactiy"!=o&&r.push(i[i1])}if(e=e.replace(a,r.join(";")),t&&t.svg){var c=t.svg.id,p=2,f=e.slice(-p);"/>"!=f&&(p=3,f=e.slice(-p));var u=e.slice(0,e.length-p),g=' clip-path="url(#'+c+')" ',h=x.gatherAttribute(t.svg,"class");if(e=-1!=(h=h?h.split(" "):[]).indexOf(x.setup.chart.classNamePrefix+"-graph-line")?u+g+f:"<g "+g+">"+e+"</g>",-1==v.indexOf(c)){var m=(new XMLSerializer).serializeToString(t.svg);b.push(m),v.push(c)}}return e}},e||{});if(!x.handleNamespace("fabric",{scope:this,cb:x.toSVG,args:arguments}))return!1;if(a=x.setup.fabric.toSVG(i,i.reviver),b.length){var r=a.slice(0,a.length-6),n=a.slice(-6);a=r+b.join("")+n}return i.compress&&(a=a.replace(/[\t\r\n]+/g,"")),i.getBase64&&(a="data:image/svg+xml;base64,"+btoa(a)),x.handleCallback(t,a,i),a},toPDF:function(e,t){var a,i,r=x.deepMerge(x.deepMerge({multiplier:x.config.multiplier||2,pageOrigin:void 0===x.config.pageOrigin},x.config.pdfMake),e||{},!0);if(/iP(hone|od|ad)/.test(navigator.platform)&&(r.multiplier=1),!x.handleNamespace("pdfMake",{scope:this,cb:x.toPDF,args:arguments}))return!1;if(r.images.reference=x.toPNG(r),!r.content){var n=[],o=function(e,t){var a=x.defaults.pdfMake.pageSizes[String(e).toUpperCase()].slice();if(!a)throw new Error('The given pageSize "'+e+'" does not exist!');return"landscape"==t&&a.reverse(),a}(r.pageSize,r.pageOrientation),s=function(e){if("number"==typeof e||e instanceof Number)e={left:e,right:e,top:e,bottom:e};else if(e instanceof Array)if(2===e.length)e={left:e[0],top:e[1],right:e[0],bottom:e[1]};else{if(4!==e.length)throw"Invalid pageMargins definition";e={left:e[0],top:e[1],right:e[2],bottom:e[3]}}else e={left:x.defaults.pdfMake.pageMargins,top:x.defaults.pdfMake.pageMargins,right:x.defaults.pdfMake.pageMargins,bottom:x.defaults.pdfMake.pageMargins};return e}(r.pageMargins);o[0]-=s.left+s.right,o[1]-=s.top+s.bottom,r.pageOrigin&&(n.push(x.i18l("label.saved.from")),n.push(window.location.href),o[1]-=28.128),n.push({image:"reference",fit:o}),r.content=n}return a=new pdfMake.createPdf(r),t&&a.getDataUrl((i=t,function(e){i.apply(x,arguments)})),a},toPRINT:function(e,t){var a,i=x.deepMerge({delay:1,lossless:!1},e||{}),r=x.toImage(i),n=[],o=document.body.childNodes,s=document.documentElement.scrollTop||document.body.scrollTop;for(r.setAttribute("style","width: 100%; max-height: 100%;"),a=0;a<o.length;a++)x.isElement(o[a])&&(n[a]=o[a].style.display,o[a].style.display="none");return document.body.appendChild(r),i.delay*=1e3,/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream&&i.delay<1e3&&(i.delay=1e3),setTimeout(function(){window.print(),setTimeout(function(){for(a=0;a<o.length;a++)x.isElement(o[a])&&(o[a].style.display=n[a]);document.body.removeChild(r),document.documentElement.scrollTop=document.body.scrollTop=s,x.handleCallback(t,r,i)},i.delay)},i.delay),r},toJSON:function(e,t){var a=x.deepMerge({dateFormat:x.config.dateFormat||"dateObject"},e||{},!0),i={};return!!x.handleNamespace("JSON",{scope:this,cb:x.toJSON,args:arguments})&&(a.data=void 0!==a.data?a.data:x.getChartData(a),i=JSON.stringify(a.data,void 0,"\t"),x.handleCallback(t,i,a),i)},toCSV:function(e,t){var a,i=x.deepMerge({delimiter:",",quotes:!0,escape:!0,withHeader:!0},e||{},!0),r=[],n="";for(a in r=x.toArray(i))isNaN(a)||(n+=r[a].join(i.delimiter)+"\n");return x.handleCallback(t,n,i),n},toXLSX:function(e,t){var a=x.deepMerge({name:"amCharts",dateFormat:x.config.dateFormat||"dateObject",withHeader:!0,stringify:!1},e||{},!0),i=[],r="",n={SheetNames:[],Sheets:{}};return!!x.handleNamespace("XLSX",{scope:this,cb:x.toXLSX,args:arguments})&&(i=x.toArray(a),n.SheetNames.push(a.name),n.Sheets[a.name]=function(e,t){for(var a={},i={s:{c:1e7,r:1e7},e:{c:0,r:0}},r=0;r!=e.length;++r)for(var n=0;n!=e[r].length;++n){i.s.r>r&&(i.s.r=r),i.s.c>n&&(i.s.c=n),i.e.r<r&&(i.e.r=r),i.e.c<n&&(i.e.c=n);var o={v:e[r][n]};if(null!=o.v){var s=XLSX.utils.encode_cell({c:n,r:r});"number"==typeof o.v?o.t="n":"boolean"==typeof o.v?o.t="b":o.v instanceof Date?(o.t="n",o.z=XLSX.SSF._table[14],o.v=(l=o.v,void 0&&(l+=1462),(Date.parse(l)-60*l.getTimezoneOffset()*1e3-new Date(Date.UTC(1899,11,30)))/864e5)):o.v instanceof Object?(o.t="s",o.v=JSON.stringify(o.v)):o.t="s",a[s]=o}}var l;return i.s.c<1e7&&(a["!ref"]=XLSX.utils.encode_range(i)),a}(i),r="data:application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;base64,"+(r=XLSX.write(n,{bookType:"xlsx",bookSST:!0,type:"base64"})),x.handleCallback(t,r,a),r)},toArray:function(e,t){function a(e){return"string"==typeof e&&(r.escape&&(e=e.replace('"','""')),r.quotes&&(e=['"',e,'"'].join(""))),e}var i,r=x.deepMerge({withHeader:!1,stringify:!0,escape:!1,quotes:!1},e||{},!0),n=[],o=[],s=[],l=x.config.processData;if(r.processData=function(e,t){var a=t.exportFields||Object.keys(t.dataFieldsMap);for(d=0;d<a.length;d++){var i=a[d],r=t.dataFieldsTitlesMap[i];o.push(r)}return l?x.handleCallback(l,e,t):e},r.data=void 0!==r.data?x.processData(r):x.getChartData(r),r.withHeader){for(d in s=[],o)isNaN(d)||s.push(a(o[d]));n.push(s)}for(i in r.data)if(s=[],!isNaN(i)){for(d in o)if(!isNaN(d)){var d=o[d],c=r.data[i][d];c=null==c?"":r.stringify?String(c):c,s.push(a(c))}n.push(s)}return x.handleCallback(t,n,r),n},toByteArray:function(e,t){function c(e){var t=e.charCodeAt(0);return t===i?62:t===r?63:t<n?-1:t<n+10?t-n+26+26:t<s+26?t-s:t<o+26?t-o+26:void 0}var a=x.deepMerge({},e||{}),p="undefined"!=typeof Uint8Array?Uint8Array:Array,i="+".charCodeAt(0),r="/".charCodeAt(0),n="0".charCodeAt(0),o="a".charCodeAt(0),s="A".charCodeAt(0),l=function(e){function t(e){s[d++]=e}var a,i,r,n,o,s;if(0<e.length%4)throw new Error("Invalid string. Length must be a multiple of 4");var l=e.length;o="="===e.charAt(l-2)?2:"="===e.charAt(l-1)?1:0,s=new p(3*e.length/4-o),r=0<o?e.length-4:e.length;var d=0;for(i=a=0;a<r;a+=4,i+=3)t((16711680&(n=c(e.charAt(a))<<18|c(e.charAt(a+1))<<12|c(e.charAt(a+2))<<6|c(e.charAt(a+3))))>>16),t((65280&n)>>8),t(255&n);return 2===o?t(255&(n=c(e.charAt(a))<<2|c(e.charAt(a+1))>>4)):1===o&&(t((n=c(e.charAt(a))<<10|c(e.charAt(a+1))<<4|c(e.charAt(a+2))>>2)>>8&255),t(255&n)),s}(a.data);return x.handleCallback(t,l,a),l},removeFunctionsFromObject:function(e){for(var t in e)"function"==typeof e[t]&&delete e[t];return e},handleCallback:function(e){var t,a=Array();if(e&&e instanceof Function){for(t=0;t<arguments.length;t++)0<t&&a.push(arguments[t]);return e.apply(x,a)}},handleLog:function(e){!0===x.config.debug&&console.log(e)},handleNamespace:function(a,i){var r,n=x.config.scope||window,o=!1,s=Number(new Date);return(o=!!(a in n))||(x.handleLog(['AmCharts [export]: Could not find "',a,'" in: ',String(n)].join("")),function e(){var t=Number(new Date);o=!!(a in n),"pdfMake"==a&&o&&(o=n.pdfMake.vfs),o?(clearTimeout(r),i.cb.apply(i.scope,i.args),x.handleLog(['AmCharts [export]: Namespace "',a,'" showed up in: ',String(n)].join(""))):t-s<x.libs.loadTimeout?r=setTimeout(e,250):x.handleLog(['AmCharts [export]: Gave up waiting for "',a,'" in: ',String(n)].join(""))}()),o},handleBorder:function(e){if(x.config.border instanceof Object){var t=x.deepMerge(x.defaults.fabric.border,e.border||{},!0),a=new fabric.Rect;t.width=x.setup.fabric.width-t.strokeWidth,t.height=x.setup.fabric.height-t.strokeWidth,a.set(t),x.setup.fabric.add(a)}},handleDropbox:function(t){if(x.drawing.enabled)if(t.preventDefault(),t.stopPropagation(),"dragover"==t.type)x.setup.wrapper.setAttribute("class",x.setup.chart.classNamePrefix+"-export-canvas active dropbox");else if(x.setup.wrapper.setAttribute("class",x.setup.chart.classNamePrefix+"-export-canvas active"),"drop"==t.type&&t.dataTransfer.files.length)for(var e=0;e<t.dataTransfer.files.length;e++){var a=new FileReader;a.onloadend=function(e){return function(){x.drawing.handler.add({url:a.result,top:t.layerY-10*e,left:t.layerX-10*e})}}(e),a.readAsDataURL(t.dataTransfer.files[e])}},handleReady:function(i){var r=this,n=Number(new Date);for(filename in r.handleCallback(i,"data",!1),r.libs.namespaces)!function(t){var a=setInterval(function(){var e=Number(new Date);(e-n>r.libs.loadTimeout||t in window)&&(clearTimeout(a),r.handleCallback(i,t,e-n>r.libs.loadTimeout))},AmCharts.updateRate)}(r.libs.namespaces[filename])},getChartData:function(e){function t(e,t,a){e&&o.exportTitles&&"gantt"!=x.setup.chart.type&&(u=function e(t,a){return-1!=o.dataFields.indexOf(t)?e([t,".",a].join("")):t}(e,a),o.dataFieldsMap[u]=e,o.dataFields.push(u),o.titles[u]=t||u)}var a,i,r,n,o=x.deepMerge({data:[],titles:{},dateFields:[],dataFields:[],dataFieldsMap:{},exportTitles:x.config.exportTitles,exportFields:x.config.exportFields,exportSelection:x.config.exportSelection,columnNames:x.config.columnNames},e||{},!0),s=["valueField","openField","closeField","highField","lowField","xField","yField"];if(0==o.data.length)if("stock"==x.setup.chart.type){for(o.data=x.cloneObject(x.setup.chart.mainDataSet.dataProvider),t(x.setup.chart.mainDataSet.categoryField),o.dateFields.push(x.setup.chart.mainDataSet.categoryField),a=0;a<x.setup.chart.mainDataSet.fieldMappings.length;a++)for(f=x.setup.chart.mainDataSet.fieldMappings[a],i=0;i<x.setup.chart.panels.length;i++){var l=x.setup.chart.panels[i];for(r=0;r<l.stockGraphs.length;r++)for(b=l.stockGraphs[r],i4=0;i4<s.length;i4++)b[s[i4]]==f.toField&&t(f.fromField,b.title,s[i4])}if(x.setup.chart.comparedGraphs.length){for(n=[],a=0;a<o.data.length;a++)n.push(o.data[a][x.setup.chart.mainDataSet.categoryField]);for(a=0;a<x.setup.chart.comparedGraphs.length;a++)for(b=x.setup.chart.comparedGraphs[a],i=0;i<b.dataSet.dataProvider.length;i++){var d=b.dataSet.categoryField,c=b.dataSet.dataProvider[i][d],p=n.indexOf(c);if(-1!=p)for(r=0;r<b.dataSet.fieldMappings.length;r++){var f=b.dataSet.fieldMappings[r],u=b.dataSet.id+"_"+f.toField;o.data[p][u]=b.dataSet.dataProvider[i][f.fromField],o.titles[u]||t(u,b.dataSet.title)}}}}else if("gantt"==x.setup.chart.type){t(x.setup.chart.categoryField);var g=x.setup.chart.segmentsField;for(a=0;a<x.setup.chart.dataProvider.length;a++){var h=x.setup.chart.dataProvider[a];if(h[g])for(i=0;i<h[g].length;i++)h[g][i][x.setup.chart.categoryField]=h[x.setup.chart.categoryField],o.data.push(h[g][i])}for(a=0;a<x.setup.chart.graphs.length;a++)for(b=x.setup.chart.graphs[a],i=0;i<s.length;i++){var m=b[v=s[i]];b.title,t(m,b.title,v)}}else if(-1!=["pie","funnel"].indexOf(x.setup.chart.type))o.data=x.setup.chart.dataProvider,t(x.setup.chart.titleField),o.dateFields.push(x.setup.chart.titleField),t(x.setup.chart.valueField);else if("map"!=x.setup.chart.type)for(o.data=x.setup.chart.dataProvider,x.setup.chart.categoryAxis&&(t(x.setup.chart.categoryField,x.setup.chart.categoryAxis.title),!1!==x.setup.chart.categoryAxis.parseDates&&o.dateFields.push(x.setup.chart.categoryField)),a=0;a<x.setup.chart.graphs.length;a++){var b=x.setup.chart.graphs[a];for(i=0;i<s.length;i++){var v=s[i];t(m=b[v],b.title,v)}}return x.processData(o)},getAnnotations:function(e,t){var a,i=x.deepMerge({},e||{},!0),r=[];for(a=0;a<x.setup.fabric._objects.length;a++)if(!x.setup.fabric._objects[a].isCoreElement){var n=x.setup.fabric._objects[a].toJSON();x.handleCallback(i.reviver,n,a),r.push(n)}return x.handleCallback(t,r),r},setAnnotations:function(e,t){var a=x.deepMerge({data:[]},e||{},!0);return fabric.util.enlivenObjects(a.data,function(e){e.forEach(function(e,t){x.handleCallback(a.reviver,e,t),x.setup.fabric.add(e)}),x.handleCallback(t,a)}),a.data},processData:function(e){var t,a,i=x.deepMerge({data:[],titles:{},dateFields:[],dataFields:[],dataFieldsMap:{},dataFieldsTitlesMap:{},dataDateFormat:x.setup.chart.dataDateFormat,dateFormat:x.config.dateFormat||x.setup.chart.dataDateFormat||"YYYY-MM-DD",exportTitles:x.config.exportTitles,exportFields:x.config.exportFields,exportSelection:x.config.exportSelection,columnNames:x.config.columnNames,processData:x.config.processData},e||{},!0);if(i.data.length){for(t=0;t<i.data.length;t++)for(a in i.data[t])-1==i.dataFields.indexOf(a)&&(i.dataFields.push(a),i.dataFieldsMap[a]=a);void 0!==i.exportFields&&(i.dataFields=i.exportFields.filter(function(e){return-1!=i.dataFields.indexOf(e)}));var r=[];for(t=0;t<i.data.length;t++){var n={},o=!1;for(a=0;a<i.dataFields.length;a++){var s=i.dataFields[a],l=i.dataFieldsMap[s],d=i.columnNames&&i.columnNames[s]||i.titles[s]||s,c=i.data[t][l];null==c&&(c=void 0),i.exportTitles&&"gantt"!=x.setup.chart.type&&d in n&&(d+=["( ",s," )"].join("")),-1!=i.dateFields.indexOf(l)&&(i.dataDateFormat&&(c instanceof String||"string"==typeof c)?c=AmCharts.stringToDate(c,i.dataDateFormat):i.dateFormat&&(c instanceof Number||"number"==typeof c)&&(c=new Date(c)),i.exportSelection&&(c instanceof Date?(c<v.startDate||c>v.endDate)&&(o=!0):(t<v.startIndex||t>v.endIndex)&&(o=!0)),i.dateFormat&&"dateObject"!=i.dateFormat&&c instanceof Date&&(c=AmCharts.formatDate(c,i.dateFormat))),n[i.dataFieldsTitlesMap[l]=d]=c}o||r.push(n)}i.data=r}return void 0!==i.processData&&(i.data=x.handleCallback(i.processData,i.data,i)),i.data},capitalize:function(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()},createMenu:function(e,t){function m(e,t){var c,a,i=document.createElement("ul");for(c=0;c<e.length;c++){var r="string"==typeof e[c]?{format:e[c]}:e[c],n=document.createElement("li"),o=document.createElement("a"),s=document.createElement("img"),l=document.createElement("span"),d=String(r.action?r.action:r.format).toLowerCase();if(r.format=String(r.format).toUpperCase(),n.addEventListener("mouseleave",function(e){this.classList.remove("active")}),o.addEventListener("focus",function(e){if(!x.setup.hasTouch){var t=(x.setup.focusedMenuItem=this).parentNode;"UL"!=t.tagName&&(t=t.parentNode);var a=t.getElementsByTagName("li");for(c=0;c<a.length;c++)a[c].classList.remove("active");this.parentNode.classList.add("active"),this.parentNode.parentNode.parentNode.classList.add("active")}}),x.config.formats[r.format]?r=x.deepMerge({label:r.icon?"":r.format,format:r.format,mimeType:x.config.formats[r.format].mimeType,extension:x.config.formats[r.format].extension,capture:x.config.formats[r.format].capture,action:x.config.action,fileName:x.config.fileName},r):r.label||(r.label=r.label?r.label:x.i18l("menu.label."+d)),(-1==["CSV","JSON","XLSX"].indexOf(r.format)||-1==["map","gauge"].indexOf(x.setup.chart.type))&&(x.setup.hasBlob||"UNDEFINED"==r.format||!r.mimeType||"image"==r.mimeType.split("/")[0]||"text/plain"==r.mimeType)){if("draw"==r.action)x.config.fabric.drawing.enabled?(r.menu=r.menu?r.menu:x.config.fabric.drawing.menu,r.click=function(e){return function(){this.capture(e,function(){this.createMenu(e.menu)})}}(r)):r.menu=[];else if(!r.populated&&r.action&&-1!=r.action.indexOf("draw.")){var p=r.action.split(".")[1],f=r[p]||x.config.fabric.drawing[p]||[];for(r.menu=[],r.populated=!0,a=0;a<f.length;a++){var u={label:f[a]};if("shapes"==p){var g=-1==f[a].indexOf("//"),h=(g?x.config.path+"shapes/":"")+f[a];u.action="add",u.url=h,u.icon=h,u.ignore=g,u.class="export-drawing-shape"}else"colors"==p?(u.style="background-color: "+f[a],u.action="change",u.color=f[a],u.class="export-drawing-color"):"widths"==p?(u.action="change",u.width=f[a],u.label=document.createElement("span"),u.label.style.width=x.numberToPx(f[a]),u.label.style.height=x.numberToPx(f[a]),u.class="export-drawing-width"):"opacities"==p?(u.style="opacity: "+f[a],u.action="change",u.opacity=f[a],u.label=100*f[a]+"%",u.class="export-drawing-opacity"):"modes"==p&&(u.label=x.i18l("menu.label.draw.modes."+f[a]),u.click=function(e){return function(){x.drawing.mode=e}}(f[a]),u.class="export-drawing-mode");r.menu.push(u)}}else r.click||r.menu||r.items||(x.drawing.handler[d]instanceof Function?(r.action=d,r.click=function(e){return function(){this.drawing.handler[e.action](e),"cancel"!=e.action&&this.createMenu(this.config.fabric.drawing.menu)}}(r)):x.drawing.enabled?r.click=function(t){return function(){this.config.drawing.autoClose&&this.drawing.handler.done(),this["to"+t.format](t,function(e){"download"==t.action&&this.download(e,t.mimeType,[t.fileName,t.extension].join("."))})}}(r):"UNDEFINED"!=r.format&&(r.click=function(t){return function(){if(t.capture||"print"==t.action||"PRINT"==t.format)this.capture(t,function(){this.drawing.handler.done(),this["to"+t.format](t,function(e){"download"==t.action&&this.download(e,t.mimeType,[t.fileName,t.extension].join("."))})});else{if(!this["to"+t.format])throw new Error("Invalid format. Could not determine output type.");this["to"+t.format](t,function(e){this.download(e,t.mimeType,[t.fileName,t.extension].join("."))})}}}(r)));(void 0===r.menu||r.menu.length)&&(o.setAttribute("href","#"),x.setup.hasTouch&&n.classList?(o.addEventListener("touchend",function(a,i){return function(e){e.preventDefault();var t=[e,i];if(("draw"==i.action||"PRINT"==i.format||"UNDEFINED"!=i.format&&i.capture)&&!x.drawing.enabled&&(!isNaN(i.delay)||!isNaN(x.config.delay)))return i.delay=isNaN(i.delay)?x.config.delay:i.delay,void x.delay(i,a);a.apply(x,t)}}(r.click||function(e){e.preventDefault()},r)),o.addEventListener("touchend",function(d){return function(e){function t(e){return e.classList.contains("export-main")||e.classList.contains("export-drawing")}e.preventDefault();var a,i,r=d.elements.li,n=(a=r.parentNode.parentNode,i=a.classList,!("LI"!=a.tagName||!i.contains("active"))),o=(function(e){var t=e.parentNode.children;for(c=0;c<t.length;c++){var a=t[c],i=a.classList;if(a!==e&&i.contains("active"))return i.remove("active")}}(r),0<r.getElementsByTagName("ul").length);if(!t(r)&&o||x.setup.menu.classList.toggle("active"),!n||!o)for(;b.length;){var s=b.pop(),l=s!==r;t(s)?o||s.classList.remove("active"):l&&s.classList.remove("active")}b.push(r),o&&r.classList.toggle("active")}}(r))):o.addEventListener("click",function(a,i){return function(e){e.preventDefault();var t=[e,i];if(("draw"==i.action||"PRINT"==i.format||"UNDEFINED"!=i.format&&i.capture)&&!x.drawing.enabled&&(!isNaN(i.delay)||!isNaN(x.config.delay)))return i.delay=isNaN(i.delay)?x.config.delay:i.delay,void x.delay(i,a);a.apply(x,t)}}(r.click||function(e){e.preventDefault()},r)),n.appendChild(o),x.isElement(r.label)?l.appendChild(r.label):l.innerHTML=r.label,r.class&&(n.className=r.class),r.style&&n.setAttribute("style",r.style),r.icon&&(s.setAttribute("src",(r.ignore||-1!=r.icon.slice(0,10).indexOf("//")?"":v.pathToImages)+r.icon),o.appendChild(s)),r.label&&o.appendChild(l),r.title&&o.setAttribute("title",r.title),x.config.menuReviver&&(n=x.config.menuReviver.apply(x,[r,n])),r.elements={li:n,a:o,img:s,span:l},(r.menu||r.items)&&"draw"!=r.action?m(r.menu||r.items,n).childNodes.length&&i.appendChild(n):i.appendChild(n))}}return i.childNodes.length&&t.appendChild(i),i}var b=[];return t||("string"==typeof x.config.divId?x.config.divId=t=document.getElementById(x.config.divId):t=x.isElement(x.config.divId)?x.config.divId:x.setup.chart.containerDiv),x.isElement(x.setup.menu)?x.setup.menu.innerHTML="":x.setup.menu=document.createElement("div"),x.setup.menu.setAttribute("class",x.setup.chart.classNamePrefix+"-export-menu "+x.setup.chart.classNamePrefix+"-export-menu-"+x.config.position+" amExportButton"),x.config.menuWalker&&(m=x.config.menuWalker),m.apply(this,[e,x.setup.menu]),x.setup.menu.childNodes.length&&t.appendChild(x.setup.menu),x.setup.menu},delay:function(e,t){var a,i,r=x.deepMerge({delay:3,precision:2},e||{}),n=Number(new Date),o=x.createMenu([{label:x.i18l("capturing.delayed.menu.label").replace("{{duration}}",AmCharts.toFixed(r.delay,r.precision)),title:x.i18l("capturing.delayed.menu.title"),class:"export-delayed-capturing",click:function(){clearTimeout(a),clearTimeout(i),x.createMenu(x.config.menu)}}]).getElementsByTagName("a")[0];a=setInterval(function(){var e=r.delay-(Number(new Date)-n)/1e3;e<=0?(clearTimeout(a),"draw"!=r.action&&x.createMenu(x.config.menu)):o&&(o.innerHTML=x.i18l("capturing.delayed.menu.label").replace("{{duration}}",AmCharts.toFixed(e,2)))},AmCharts.updateRate),i=setTimeout(function(){t.apply(x,arguments)},1e3*r.delay)},migrateSetup:function(e){var r={enabled:!0,migrated:!0,libs:{autoLoad:!0},menu:[]};return function e(t){var a;for(a in t){var i=t[a];"export"==a.slice(0,6)&&i?r.menu.push(a.slice(6)):"userCFG"==a?e(i):"menuItems"==a?r.menu=i:"libs"==a?r.libs=i:"string"==typeof a&&(r[a]=i)}}(e),r},clear:function(){var e,t;for(void 0!==x.setup.fabric&&x.setup.fabric.removeListeners(),e=0;e<x.listenersToRemove.length;e++)(t=x.listenersToRemove[e]).node.removeEventListener(t.event,t.method);x.isElement(x.setup.wrapper)&&x.isElement(x.setup.wrapper.parentNode)&&x.setup.wrapper.parentNode.removeChild&&x.setup.wrapper.parentNode.removeChild(x.setup.wrapper),x.isElement(x.setup.menu)&&x.isElement(x.setup.wrapper.parentNode)&&x.setup.wrapper.parentNode.removeChild&&x.setup.menu.parentNode.removeChild(x.setup.menu),x.listenersToRemove=[],x.setup.chart.AmExport=void 0,x.setup.chart.export=void 0,x.setup=void 0},loadListeners:function(){function o(e){e&&(e.set({top:e.top+10,left:e.left+10}),x.setup.fabric.add(e))}x.config.keyListener&&"attached"!=x.config.keyListener&&(x.docListener=function(e){function t(e,t){for(i1=0;i1<e.length;i1++){var a=e[i1];a.parentNode.classList.remove("active"),0!=i1||t||a.focus()}}function a(e){x.setup.focusedMenuItem&&x.setup.focusedMenuItem.nextSibling&&(x.setup.focusedMenuItem.parentNode.classList.add("active"),t(x.setup.focusedMenuItem.nextSibling.getElementsByTagName("a"),e))}function i(e){x.setup.focusedMenuItem&&x.setup.focusedMenuItem.parentNode.parentNode.parentNode&&(x.setup.focusedMenuItem.parentNode.classList.add("active"),t(x.setup.focusedMenuItem.parentNode.parentNode.parentNode.getElementsByTagName("a"),e))}var r=x.drawing.buffer.target,n=(["top-left","bottom-left"].indexOf(x.config.position),-1!=["top-right","bottom-right"].indexOf(x.config.position));if(x.setup.focusedMenuItem&&-1!=[37,38,39,40,13,9,27].indexOf(e.keyCode)){if(9==e.keyCode)return void(x.setup.focusedMenuItem.nextSibling?e.shiftKey&&x.setup.focusedMenuItem.parentNode.classList.remove("active"):(x.setup.focusedMenuItem.parentNode.classList.remove("active"),x.setup.focusedMenuItem.parentNode.nextSibling||(x.setup.focusedMenuItem.parentNode.classList.remove("active"),x.setup.focusedMenuItem.parentNode.parentNode.parentNode.classList.remove("active"))));13==e.keyCode&&x.setup.focusedMenuItem.nextSibling&&a(),37==e.keyCode&&(n?a():i()),39==e.keyCode&&(n?i():a()),40==e.keyCode&&x.setup.focusedMenuItem&&x.setup.focusedMenuItem.parentNode.nextSibling&&(x.setup.focusedMenuItem.parentNode.classList.remove("active"),t(x.setup.focusedMenuItem.parentNode.nextSibling.getElementsByTagName("a"),void 0)),38==e.keyCode&&x.setup.focusedMenuItem&&x.setup.focusedMenuItem.parentNode.previousSibling&&(x.setup.focusedMenuItem.parentNode.classList.remove("active"),t(x.setup.focusedMenuItem.parentNode.previousSibling.getElementsByTagName("a"),void 0)),27==e.keyCode&&x.setup.focusedMenuItem&&(function e(t){if(x.isElement(t)){try{t.blur()}catch(e){}t.parentNode&&t.parentNode.classList.remove("active"),t.classList.contains("amExportButton")||e(t.parentNode)}}(x.setup.focusedMenuItem),x.setup.focusedMenuItem=void 0)}8!=e.keyCode&&46!=e.keyCode||!r?27==e.keyCode&&x.drawing.enabled?(e.preventDefault(),x.drawing.buffer.isSelected?x.setup.fabric.discardActiveObject():x.drawing.handler.done()):67==e.keyCode&&(e.metaKey||e.ctrlKey)&&r?x.drawing.buffer.copy=r:88==e.keyCode&&(e.metaKey||e.ctrlKey)&&r?(x.drawing.buffer.copy=r,x.setup.fabric.remove(r)):86==e.keyCode&&(e.metaKey||e.ctrlKey)?x.drawing.buffer.copy&&o(x.drawing.buffer.copy.clone(o)):90==e.keyCode&&(e.metaKey||e.ctrlKey)&&(e.preventDefault(),e.shiftKey?x.drawing.handler.redo():x.drawing.handler.undo()):(e.preventDefault(),x.setup.fabric.remove(r))},x.config.keyListener="attached",document.addEventListener("keydown",x.docListener),x.addListenerToRemove("keydown",document,x.docListener)),x.config.fileListener&&(x.setup.chart.containerDiv.addEventListener("dragover",x.handleDropbox),x.addListenerToRemove("dragover",x.setup.chart.containerDiv,x.handleDropbox),x.setup.chart.containerDiv.addEventListener("dragleave",x.handleDropbox),x.addListenerToRemove("dragleave",x.setup.chart.containerDiv,x.handleDropbox),x.setup.chart.containerDiv.addEventListener("drop",x.handleDropbox),x.addListenerToRemove("drop",x.setup.chart.containerDiv,x.handleDropbox))},init:function(){clearTimeout(t),t=setInterval(function(){x.setup&&x.setup.chart.containerDiv&&(clearTimeout(t),x.config.enabled&&((x.setup.chart.AmExport=x).config.overflow&&(x.setup.chart.div.style.overflow="visible"),x.loadListeners(),x.createMenu(x.config.menu),x.handleReady(x.config.onReady)))},AmCharts.updateRate)},construct:function(){x.drawing.handler.cancel=x.drawing.handler.done;try{x.setup.hasBlob=!!new Blob}catch(e){}window.safari=window.safari?window.safari:{},x.defaults.fabric.drawing.fontSize=x.setup.chart.fontSize||11,x.config.drawing=x.deepMerge(x.defaults.fabric.drawing,x.config.drawing||{},!0),x.config.border&&(x.config.border=x.deepMerge(x.defaults.fabric.border,x.config.border||{},!0)),x.deepMerge(x.defaults.fabric,x.config,!0),x.deepMerge(x.defaults.fabric,x.config.fabric||{},!0),x.deepMerge(x.defaults.pdfMake,x.config,!0),x.deepMerge(x.defaults.pdfMake,x.config.pdfMake||{},!0),x.deepMerge(x.libs,x.config.libs||{},!0),x.config.drawing=x.defaults.fabric.drawing,x.config.fabric=x.defaults.fabric,x.config.pdfMake=x.defaults.pdfMake,x.config=x.deepMerge(x.defaults,x.config,!0),x.config.fabric.drawing.enabled&&void 0===x.config.fabric.drawing.menu&&(x.config.fabric.drawing.menu=[],x.deepMerge(x.config.fabric.drawing.menu,[{class:"export-drawing",menu:[{label:x.i18l("menu.label.draw.add"),menu:[{label:x.i18l("menu.label.draw.shapes"),action:"draw.shapes"},{label:x.i18l("menu.label.draw.text"),action:"text"}]},{label:x.i18l("menu.label.draw.change"),menu:[{label:x.i18l("menu.label.draw.modes"),action:"draw.modes"},{label:x.i18l("menu.label.draw.colors"),action:"draw.colors"},{label:x.i18l("menu.label.draw.widths"),action:"draw.widths"},{label:x.i18l("menu.label.draw.opacities"),action:"draw.opacities"},"UNDO","REDO"]},{label:x.i18l("menu.label.save.image"),menu:["PNG","JPG","SVG","PDF"]},"PRINT","CANCEL"]}])),void 0===x.config.menu&&(x.config.menu=[],x.deepMerge(x.config,{menu:[{class:"export-main",menu:[{label:x.i18l("menu.label.save.image"),menu:["PNG","JPG","SVG","PDF"]},{label:x.i18l("menu.label.save.data"),menu:["CSV","XLSX","JSON"]},{label:x.i18l("menu.label.draw"),action:"draw",menu:x.config.fabric.drawing.menu},{format:"PRINT",label:x.i18l("menu.label.print")}]}]})),x.libs.path||(x.libs.path=x.config.path+"libs/"),x.setup.hasClasslist||x.libs.resources.push("classList.js/classList.min.js"),x.isSupported()&&(x.loadDependencies(x.libs.resources,x.libs.reload),x.setup.chart.addClassNames=!0,(x.setup.chart[x.name]=x).init())}};if(e)x.config=e;else if(x.setup.chart[x.name])x.config=x.setup.chart[x.name];else{if(!x.setup.chart.amExport&&!x.setup.chart.exportConfig)return;x.config=x.migrateSetup(x.setup.chart.amExport||x.setup.chart.exportConfig)}return x.construct(),x.deepMerge(this,x)},AmCharts.addInitHandler(function(e){new AmCharts.export(e)},["pie","serial","xy","funnel","radar","gauge","stock","map","gantt"]);