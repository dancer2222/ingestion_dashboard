!function(i){"use strict";function a(t,e){return"f"===t?Math.round(5/9*(e-32)):Math.round(1.8*e+32)}i.extend({simpleWeather:function(s){s=i.extend({location:"",woeid:"",unit:"f",success:function(t){},error:function(t){}},s);var t=new Date,e="https://query.yahooapis.com/v1/public/yql?format=json&rnd="+t.getFullYear()+t.getMonth()+t.getDay()+t.getHours()+"&diagnostics=true&callback=?&q=";if(""!==s.location){e+='select * from weather.forecast where woeid in (select woeid from geo.places(1) where text="'+(/^(\-?\d+(\.\d+)?),\s*(\-?\d+(\.\d+)?)$/.test(s.location)?"("+s.location+")":s.location)+'") and u="'+s.unit+'"'}else{if(""===s.woeid)return s.error("Could not retrieve weather due to an invalid location."),!1;e+="select * from weather.forecast where woeid="+s.woeid+' and u="'+s.unit+'"'}return i.getJSON(encodeURI(e),function(t){if(null!==t&&null!==t.query&&null!==t.query.results&&"Yahoo! Weather Error"!==t.query.results.channel.description){var e,i=t.query.results.channel,o={},n="https://s.yimg.com/os/mit/media/m/weather/images/icons/l/44d-100567.png";o.title=i.item.title,o.temp=i.item.condition.temp,o.code=i.item.condition.code,o.todayCode=i.item.forecast[0].code,o.currently=i.item.condition.text,o.high=i.item.forecast[0].high,o.low=i.item.forecast[0].low,o.text=i.item.forecast[0].text,o.humidity=i.atmosphere.humidity,o.pressure=i.atmosphere.pressure,o.rising=i.atmosphere.rising,o.visibility=i.atmosphere.visibility,o.sunrise=i.astronomy.sunrise,o.sunset=i.astronomy.sunset,o.description=i.item.description,o.city=i.location.city,o.country=i.location.country,o.region=i.location.region,o.updated=i.item.pubDate,o.link=i.item.link,o.units={temp:i.units.temperature,distance:i.units.distance,pressure:i.units.pressure,speed:i.units.speed},o.wind={chill:i.wind.chill,direction:["N","NNE","NE","ENE","E","ESE","SE","SSE","S","SSW","SW","WSW","W","WNW","NW","NNW","N"][Math.round(i.wind.direction/22.5)],speed:i.wind.speed},i.item.condition.temp<80&&i.atmosphere.humidity<40?o.heatindex=2.04901523*i.item.condition.temp-42.379+10.14333127*i.atmosphere.humidity-.22475541*i.item.condition.temp*i.atmosphere.humidity-6.83783*Math.pow(10,-3)*Math.pow(i.item.condition.temp,2)-5.481717*Math.pow(10,-2)*Math.pow(i.atmosphere.humidity,2)+1.22874*Math.pow(10,-3)*Math.pow(i.item.condition.temp,2)*i.atmosphere.humidity+8.5282*Math.pow(10,-4)*i.item.condition.temp*Math.pow(i.atmosphere.humidity,2)-1.99*Math.pow(10,-6)*Math.pow(i.item.condition.temp,2)*Math.pow(i.atmosphere.humidity,2):o.heatindex=i.item.condition.temp,"3200"==i.item.condition.code?(o.thumbnail=n,o.image=n):(o.thumbnail="https://s.yimg.com/zz/combo?a/i/us/nws/weather/gr/"+i.item.condition.code+"ds.png",o.image="https://s.yimg.com/zz/combo?a/i/us/nws/weather/gr/"+i.item.condition.code+"d.png"),o.alt={temp:a(s.unit,i.item.condition.temp),high:a(s.unit,i.item.forecast[0].high),low:a(s.unit,i.item.forecast[0].low)},"f"===s.unit?o.alt.unit="c":o.alt.unit="f",o.forecast=[];for(var r=0;r<i.item.forecast.length;r++)(e=i.item.forecast[r]).alt={high:a(s.unit,i.item.forecast[r].high),low:a(s.unit,i.item.forecast[r].low)},"3200"==i.item.forecast[r].code?(e.thumbnail=n,e.image=n):(e.thumbnail="https://s.yimg.com/zz/combo?a/i/us/nws/weather/gr/"+i.item.forecast[r].code+"ds.png",e.image="https://s.yimg.com/zz/combo?a/i/us/nws/weather/gr/"+i.item.forecast[r].code+"d.png"),o.forecast.push(e);s.success(o)}else s.error("There was a problem retrieving the latest weather information.")}),this}})}(jQuery);