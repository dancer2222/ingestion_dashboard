!function(i,d,n){var a,o="JSGrid",h="JSGridItem",r="JSGridEditRow",s="asc",l=function(e,t){return d.isFunction(e)?e.apply(t,d.makeArray(arguments).slice(2)):e},e={loadData:d.noop,insertItem:d.noop,updateItem:d.noop,deleteItem:d.noop};function c(e,t){var i=d(e);i.data(o,this),this._container=i,this.data=[],this.fields=[],this._editingRow=null,this._sortField=null,this._sortOrder=s,this._firstDisplayingPage=1,this._init(t),this.render()}c.prototype={width:"auto",height:"auto",updateOnResize:!0,rowClass:d.noop,rowRenderer:null,rowClick:function(e){this.editing&&this.editItem(d(e.event.target).closest("tr"))},rowDoubleClick:d.noop,noDataContent:"Not found",noDataRowClass:"jsgrid-nodata-row",heading:!0,headerRowRenderer:null,headerRowClass:"jsgrid-header-row",headerCellClass:"jsgrid-header-cell",filtering:!1,filterRowRenderer:null,filterRowClass:"jsgrid-filter-row",inserting:!1,insertRowRenderer:null,insertRowClass:"jsgrid-insert-row",editing:!1,editRowRenderer:null,editRowClass:"jsgrid-edit-row",confirmDeleting:!0,deleteConfirm:"Are you sure?",selecting:!0,selectedRowClass:"jsgrid-selected-row",oddRowClass:"jsgrid-row",evenRowClass:"jsgrid-alt-row",cellClass:"jsgrid-cell",sorting:!1,sortableClass:"jsgrid-header-sortable",sortAscClass:"jsgrid-header-sort jsgrid-header-sort-asc",sortDescClass:"jsgrid-header-sort jsgrid-header-sort-desc",paging:!1,pagerContainer:null,pageIndex:1,pageSize:20,pageButtonCount:15,pagerFormat:"Pages: {first} {prev} {pages} {next} {last} &nbsp;&nbsp; {pageIndex} of {pageCount}",pagePrevText:"Prev",pageNextText:"Next",pageFirstText:"First",pageLastText:"Last",pageNavigatorNextText:"...",pageNavigatorPrevText:"...",pagerContainerClass:"jsgrid-pager-container",pagerClass:"jsgrid-pager",pagerNavButtonClass:"jsgrid-pager-nav-button",pagerNavButtonInactiveClass:"jsgrid-pager-nav-inactive-button",pageClass:"jsgrid-pager-page",currentPageClass:"jsgrid-pager-current-page",customLoading:!1,pageLoading:!1,autoload:!1,controller:e,loadIndication:!0,loadIndicationDelay:500,loadMessage:"Please, wait...",loadShading:!0,invalidMessage:"Invalid data entered!",invalidNotify:function(e){var t=d.map(e.errors,function(e){return e.message||null});i.alert([this.invalidMessage].concat(t).join("\n"))},onInit:d.noop,onRefreshing:d.noop,onRefreshed:d.noop,onPageChanged:d.noop,onItemDeleting:d.noop,onItemDeleted:d.noop,onItemInserting:d.noop,onItemInserted:d.noop,onItemEditing:d.noop,onItemUpdating:d.noop,onItemUpdated:d.noop,onItemInvalid:d.noop,onDataLoading:d.noop,onDataLoaded:d.noop,onOptionChanging:d.noop,onOptionChanged:d.noop,onError:d.noop,invalidClass:"jsgrid-invalid",containerClass:"jsgrid",tableClass:"jsgrid-table",gridHeaderClass:"jsgrid-grid-header",gridBodyClass:"jsgrid-grid-body",_init:function(e){d.extend(this,e),this._initLoadStrategy(),this._initController(),this._initFields(),this._attachWindowLoadResize(),this._attachWindowResizeCallback(),this._callEventHandler(this.onInit)},loadStrategy:function(){return this.pageLoading?new jsGrid.loadStrategies.PageLoadingStrategy(this):new jsGrid.loadStrategies.DirectLoadingStrategy(this)},_initLoadStrategy:function(){this._loadStrategy=l(this.loadStrategy,this)},_initController:function(){this._controller=d.extend({},e,l(this.controller,this))},renderTemplate:function(e,t,i){for(var r in args=[],i)args.push(i[r]);return args.unshift(e,t),(e=l.apply(null,args))===n||null===e?"":e},loadIndicator:function(e){return new jsGrid.LoadIndicator(e)},validation:function(e){return jsGrid.Validation&&new jsGrid.Validation(e)},_initFields:function(){var t=this;t.fields=d.map(t.fields,function(e){d.isPlainObject(e)&&(e=new(e.type&&jsGrid.fields[e.type]||jsGrid.Field)(e));return e._grid=t,e})},_attachWindowLoadResize:function(){d(i).on("load",d.proxy(this._refreshSize,this))},_attachWindowResizeCallback:function(){this.updateOnResize&&d(i).on("resize",d.proxy(this._refreshSize,this))},_detachWindowResizeCallback:function(){d(i).off("resize",this._refreshSize)},option:function(e,t){var i,r;if(1===arguments.length)return this[e];i={option:e,oldValue:this[e],newValue:t},this._callEventHandler(this.onOptionChanging,i),this._handleOptionChange(i.option,i.newValue),r={option:i.option,value:i.newValue},this._callEventHandler(this.onOptionChanged,r)},fieldOption:function(e,t,i){if(e=this._normalizeField(e),2===arguments.length)return e[t];e[t]=i,this._renderGrid()},_handleOptionChange:function(e,t){switch(this[e]=t,e){case"width":case"height":this._refreshSize();break;case"rowClass":case"rowRenderer":case"rowClick":case"rowDoubleClick":case"noDataRowClass":case"noDataContent":case"selecting":case"selectedRowClass":case"oddRowClass":case"evenRowClass":this._refreshContent();break;case"pageButtonCount":case"pagerFormat":case"pagePrevText":case"pageNextText":case"pageFirstText":case"pageLastText":case"pageNavigatorNextText":case"pageNavigatorPrevText":case"pagerClass":case"pagerNavButtonClass":case"pageClass":case"currentPageClass":case"pagerRenderer":this._refreshPager();break;case"fields":this._initFields(),this.render();break;case"data":case"editing":case"heading":case"filtering":case"inserting":case"paging":this.refresh();break;case"loadStrategy":case"pageLoading":this._initLoadStrategy(),this.search();break;case"pageIndex":this.openPage(t);break;case"pageSize":this.refresh(),this.search();break;case"editRowRenderer":case"editRowClass":this.cancelEdit();break;case"updateOnResize":this._detachWindowResizeCallback(),this._attachWindowResizeCallback();break;case"invalidNotify":case"invalidMessage":break;default:this.render()}},destroy:function(){this._detachWindowResizeCallback(),this._clear(),this._container.removeData(o)},render:function(){return this._renderGrid(),this.autoload?this.loadData():d.Deferred().resolve().promise()},_renderGrid:function(){this._clear(),this._container.addClass(this.containerClass).css("position","relative").append(this._createHeader()).append(this._createBody()),this._pagerContainer=this._createPagerContainer(),this._loadIndicator=this._createLoadIndicator(),this._validation=this._createValidation(),this.refresh()},_createLoadIndicator:function(){return l(this.loadIndicator,this,{message:this.loadMessage,shading:this.loadShading,container:this._container})},_createValidation:function(){return l(this.validation,this)},_clear:function(){this.cancelEdit(),clearTimeout(this._loadingTimer),this._pagerContainer&&this._pagerContainer.empty(),this._container.empty().css({position:"",width:"",height:""})},_createHeader:function(){var e=this._headerRow=this._createHeaderRow(),t=this._filterRow=this._createFilterRow(),i=this._insertRow=this._createInsertRow(),r=this._headerGrid=d("<table>").addClass(this.tableClass).append(e).append(t).append(i);return this._header=d("<div>").addClass(this.gridHeaderClass).addClass(this._scrollBarWidth()?"jsgrid-header-scrollbar":"").append(r)},_createBody:function(){var e=this._content=d("<tbody>"),t=this._bodyGrid=d("<table>").addClass(this.tableClass).append(e);return this._body=d("<div>").addClass(this.gridBodyClass).append(t).on("scroll",d.proxy(function(e){this._header.scrollLeft(e.target.scrollLeft)},this))},_createPagerContainer:function(){var e=this.pagerContainer||d("<div>").appendTo(this._container);return d(e).addClass(this.pagerContainerClass)},_eachField:function(i){var r=this;d.each(this.fields,function(e,t){t.visible&&i.call(r,t,e)})},_createHeaderRow:function(){if(d.isFunction(this.headerRowRenderer))return d(this.renderTemplate(this.headerRowRenderer,this));var r=d("<tr>").addClass(this.headerRowClass);return this._eachField(function(e,t){var i=this._prepareCell("<th>",e,"headercss",this.headerCellClass).append(this.renderTemplate(e.headerTemplate,e)).appendTo(r);this.sorting&&e.sorting&&i.addClass(this.sortableClass).on("click",d.proxy(function(){this.sort(t)},this))}),r},_prepareCell:function(e,t,i,r){return d(e).css("width",t.width).addClass(r||this.cellClass).addClass(i&&t[i]||t.css).addClass(t.align?"jsgrid-align-"+t.align:"")},_createFilterRow:function(){if(d.isFunction(this.filterRowRenderer))return d(this.renderTemplate(this.filterRowRenderer,this));var t=d("<tr>").addClass(this.filterRowClass);return this._eachField(function(e){this._prepareCell("<td>",e,"filtercss").append(this.renderTemplate(e.filterTemplate,e)).appendTo(t)}),t},_createInsertRow:function(){if(d.isFunction(this.insertRowRenderer))return d(this.renderTemplate(this.insertRowRenderer,this));var t=d("<tr>").addClass(this.insertRowClass);return this._eachField(function(e){this._prepareCell("<td>",e,"insertcss").append(this.renderTemplate(e.insertTemplate,e)).appendTo(t)}),t},_callEventHandler:function(e,t){return e.call(this,d.extend(t,{grid:this})),t},reset:function(){return this._resetSorting(),this._resetPager(),this._loadStrategy.reset()},_resetPager:function(){this._firstDisplayingPage=1,this._setPage(1)},_resetSorting:function(){this._sortField=null,this._sortOrder=s,this._clearSortingCss()},refresh:function(){this._callEventHandler(this.onRefreshing),this.cancelEdit(),this._refreshHeading(),this._refreshFiltering(),this._refreshInserting(),this._refreshContent(),this._refreshPager(),this._refreshSize(),this._callEventHandler(this.onRefreshed)},_refreshHeading:function(){this._headerRow.toggle(this.heading)},_refreshFiltering:function(){this._filterRow.toggle(this.filtering)},_refreshInserting:function(){this._insertRow.toggle(this.inserting)},_refreshContent:function(){var e=this._content;if(e.empty(),!this.data.length)return e.append(this._createNoDataRow()),this;for(var t=this._loadStrategy.firstDisplayIndex(),i=this._loadStrategy.lastDisplayIndex(),r=t;r<i;r++){var a=this.data[r];e.append(this._createRow(a,r))}},_createNoDataRow:function(){var e=0;return this._eachField(function(){e++}),d("<tr>").addClass(this.noDataRowClass).append(d("<td>").addClass(this.cellClass).attr("colspan",e).append(this.renderTemplate(this.noDataContent,this)))},_createRow:function(t,i){var e;return d.isFunction(this.rowRenderer)?e=this.renderTemplate(this.rowRenderer,this,{item:t,itemIndex:i}):(e=d("<tr>"),this._renderCells(e,t)),e.addClass(this._getRowClasses(t,i)).data(h,t).on("click",d.proxy(function(e){this.rowClick({item:t,itemIndex:i,event:e})},this)).on("dblclick",d.proxy(function(e){this.rowDoubleClick({item:t,itemIndex:i,event:e})},this)),this.selecting&&this._attachRowHover(e),e},_getRowClasses:function(e,t){var i=[];return i.push((t+1)%2?this.oddRowClass:this.evenRowClass),i.push(l(this.rowClass,this,e,t)),i.join(" ")},_attachRowHover:function(e){var t=this.selectedRowClass;e.hover(function(){d(this).addClass(t)},function(){d(this).removeClass(t)})},_renderCells:function(t,i){return this._eachField(function(e){t.append(this._createCell(i,e))}),this},_createCell:function(e,t){var i,r=this._getItemFieldValue(e,t),a={value:r,item:e};return i=d.isFunction(t.cellRenderer)?this.renderTemplate(t.cellRenderer,t,a):d("<td>").append(this.renderTemplate(t.itemTemplate||r,t,a)),this._prepareCell(i,t)},_getItemFieldValue:function(e,t){for(var i=t.name.split("."),r=e[i.shift()];r&&i.length;)r=r[i.shift()];return r},_setItemFieldValue:function(e,t,i){for(var r=t.name.split("."),a=e,s=r[0];a&&r.length;)a=(e=a)[s=r.shift()];if(!a)for(;r.length;)e=e[s]={},s=r.shift();e[s]=i},sort:function(e,t){return d.isPlainObject(e)&&(t=e.order,e=e.field),this._clearSortingCss(),this._setSortingParams(e,t),this._setSortingCss(),this._loadStrategy.sort()},_clearSortingCss:function(){this._headerRow.find("th").removeClass(this.sortAscClass).removeClass(this.sortDescClass)},_setSortingParams:function(e,t){e=this._normalizeField(e),t=t||(this._sortField===e?this._reversedSortOrder(this._sortOrder):s),this._sortField=e,this._sortOrder=t},_normalizeField:function(t){return d.isNumeric(t)?this.fields[t]:"string"==typeof t?d.grep(this.fields,function(e){return e.name===t})[0]:t},_reversedSortOrder:function(e){return e===s?"desc":s},_setSortingCss:function(){var e=this._visibleFieldIndex(this._sortField);this._headerRow.find("th").eq(e).addClass(this._sortOrder===s?this.sortAscClass:this.sortDescClass)},_visibleFieldIndex:function(e){return d.inArray(e,d.grep(this.fields,function(e){return e.visible}))},_sortData:function(){var i=this._sortFactor(),r=this._sortField;r&&this.data.sort(function(e,t){return i*r.sortingFunc(e[r.name],t[r.name])})},_sortFactor:function(){return this._sortOrder===s?1:-1},_itemsCount:function(){return this._loadStrategy.itemsCount()},_pagesCount:function(){var e=this._itemsCount(),t=this.pageSize;return Math.floor(e/t)+(e%t?1:0)},_refreshPager:function(){var e=this._pagerContainer;e.empty(),this.paging&&e.append(this._createPager());var t=this.paging&&1<this._pagesCount();e.toggle(t)},_createPager:function(){var e;return(e=d.isFunction(this.pagerRenderer)?d(this.pagerRenderer({pageIndex:this.pageIndex,pageCount:this._pagesCount()})):d("<div>").append(this._createPagerByFormat())).addClass(this.pagerClass),e},_createPagerByFormat:function(){var i=this.pageIndex,r=this._pagesCount(),a=this._itemsCount(),e=this.pagerFormat.split(" ");return d.map(e,d.proxy(function(e){var t=e;return"{pages}"===e?t=this._createPages():"{first}"===e?t=this._createPagerNavButton(this.pageFirstText,1,1<i):"{prev}"===e?t=this._createPagerNavButton(this.pagePrevText,i-1,1<i):"{next}"===e?t=this._createPagerNavButton(this.pageNextText,i+1,i<r):"{last}"===e?t=this._createPagerNavButton(this.pageLastText,r,i<r):"{pageIndex}"===e?t=i:"{pageCount}"===e?t=r:"{itemCount}"===e&&(t=a),d.isArray(t)?t.concat([" "]):[t," "]},this))},_createPages:function(){var e=this._pagesCount(),t=this.pageButtonCount,i=this._firstDisplayingPage,r=[];1<i&&r.push(this._createPagerPageNavButton(this.pageNavigatorPrevText,this.showPrevPages));for(var a=0,s=i;a<t&&s<=e;a++,s++)r.push(s===this.pageIndex?this._createPagerCurrentPage():this._createPagerPage(s));return i+t-1<e&&r.push(this._createPagerPageNavButton(this.pageNavigatorNextText,this.showNextPages)),r},_createPagerNavButton:function(e,t,i){return this._createPagerButton(e,this.pagerNavButtonClass+(i?"":" "+this.pagerNavButtonInactiveClass),i?function(){this.openPage(t)}:d.noop)},_createPagerPageNavButton:function(e,t){return this._createPagerButton(e,this.pagerNavButtonClass,t)},_createPagerPage:function(e){return this._createPagerButton(e,this.pageClass,function(){this.openPage(e)})},_createPagerButton:function(e,t,i){var r=d("<a>").attr("href","javascript:void(0);").html(e).on("click",d.proxy(i,this));return d("<span>").addClass(t).append(r)},_createPagerCurrentPage:function(){return d("<span>").addClass(this.pageClass).addClass(this.currentPageClass).text(this.pageIndex)},_refreshSize:function(){this._refreshHeight(),this._refreshWidth()},_refreshWidth:function(){var e="auto"===this.width?this._getAutoWidth():this.width;this._container.width(e)},_getAutoWidth:function(){var e=this._headerGrid,t=this._header;e.width("auto");var i=e.outerWidth(),r=t.outerWidth()-t.innerWidth();return e.width(""),i+r},_scrollBarWidth:function(){if(a===n){var e=d("<div style='width:50px;height:50px;overflow:hidden;position:absolute;top:-10000px;left:-10000px;'></div>"),t=d("<div style='height:100px;'></div>");e.append(t).appendTo("body");var i=t.innerWidth();e.css("overflow-y","auto");var r=t.innerWidth();e.remove(),a=i-r}return a},_refreshHeight:function(){var e,t=this._container,i=this._pagerContainer,r=this.height;t.height(r),"auto"!==r&&(r=t.height(),e=this._header.outerHeight(!0),i.parents(t).length&&(e+=i.outerHeight(!0)),this._body.outerHeight(r-e))},showPrevPages:function(){var e=this._firstDisplayingPage,t=this.pageButtonCount;this._firstDisplayingPage=t<e?e-t:1,this._refreshPager()},showNextPages:function(){var e=this._firstDisplayingPage,t=this.pageButtonCount,i=this._pagesCount();this._firstDisplayingPage=i<e+2*t?i-t+1:e+t,this._refreshPager()},openPage:function(e){e<1||e>this._pagesCount()||(this._setPage(e),this._loadStrategy.openPage(e))},_setPage:function(e){var t=this._firstDisplayingPage,i=this.pageButtonCount;(this.pageIndex=e)<t&&(this._firstDisplayingPage=e),t+i-1<e&&(this._firstDisplayingPage=e-i+1),this._callEventHandler(this.onPageChanged,{pageIndex:e})},_controllerCall:function(e,t,i,r){if(i)return d.Deferred().reject().promise();this._showLoading();var a,s,n=this._controller;if(!n||!n[e])throw Error("controller has no method '"+e+"'");return(a=n[e](t),s=d.Deferred(),a&&a.then?a.then(function(){s.resolve.apply(s,arguments)},function(){s.reject.apply(s,arguments)}):s.resolve(a),s.promise()).done(d.proxy(r,this)).fail(d.proxy(this._errorHandler,this)).always(d.proxy(this._hideLoading,this))},_errorHandler:function(){this._callEventHandler(this.onError,{args:d.makeArray(arguments)})},_showLoading:function(){this.loadIndication&&(clearTimeout(this._loadingTimer),this._loadingTimer=setTimeout(d.proxy(function(){this._loadIndicator.show()},this),this.loadIndicationDelay))},_hideLoading:function(){this.loadIndication&&(clearTimeout(this._loadingTimer),this._loadIndicator.hide())},search:function(e){return this._resetSorting(),this._resetPager(),this.loadData(e)},loadData:function(e){e=e||(this.filtering?this.getFilter():{}),d.extend(e,this._loadStrategy.loadParams(),this._sortingParams());var t=this._callEventHandler(this.onDataLoading,{filter:e});return this._controllerCall("loadData",e,t.cancel,function(e){e&&(this._loadStrategy.finishLoad(e),this._callEventHandler(this.onDataLoaded,{data:e}))})},getFilter:function(){var t={};return this._eachField(function(e){e.filtering&&this._setItemFieldValue(t,e,e.filterValue())}),t},_sortingParams:function(){return this.sorting&&this._sortField?{sortField:this._sortField.name,sortOrder:this._sortOrder}:{}},getSorting:function(){var e=this._sortingParams();return{field:e.sortField,order:e.sortOrder}},clearFilter:function(){var e=this._createFilterRow();return this._filterRow.replaceWith(e),this._filterRow=e,this.search()},insertItem:function(e){var t=e||this._getValidatedInsertItem();if(!t)return d.Deferred().reject().promise();var i=this._callEventHandler(this.onItemInserting,{item:t});return this._controllerCall("insertItem",t,i.cancel,function(e){e=e||t,this._loadStrategy.finishInsert(e),this._callEventHandler(this.onItemInserted,{item:e})})},_getValidatedInsertItem:function(){var e=this._getInsertItem();return this._validateItem(e,this._insertRow)?e:null},_getInsertItem:function(){var t={};return this._eachField(function(e){e.inserting&&this._setItemFieldValue(t,e,e.insertValue())}),t},_validateItem:function(r,a){var s=[],n={item:r,itemIndex:this._rowIndex(a),row:a};if(this._eachField(function(t){if(t.validate&&(a!==this._insertRow||t.inserting)&&(a!==this._getEditRow()||t.editing)){var e=this._getItemFieldValue(r,t),i=this._validation.validate(d.extend({value:e,rules:t.validate},n));this._setCellValidity(a.children().eq(this._visibleFieldIndex(t)),i),i.length&&s.push.apply(s,d.map(i,function(e){return{field:t,message:e}}))}}),!s.length)return!0;var e=d.extend({errors:s},n);return this._callEventHandler(this.onItemInvalid,e),this.invalidNotify(e),!1},_setCellValidity:function(e,t){e.toggleClass(this.invalidClass,!!t.length).attr("title",t.join("\n"))},clearInsert:function(){var e=this._createInsertRow();this._insertRow.replaceWith(e),this._insertRow=e,this.refresh()},editItem:function(e){var t=this.rowByItem(e);t.length&&this._editRow(t)},rowByItem:function(e){return e.jquery||e.nodeType?d(e):this._content.find("tr").filter(function(){return d.data(this,h)===e})},_editRow:function(e){if(this.editing){var t=e.data(h);if(!this._callEventHandler(this.onItemEditing,{row:e,item:t,itemIndex:this._itemIndex(t)}).cancel){this._editingRow&&this.cancelEdit();var i=this._createEditRow(t);(this._editingRow=e).hide(),i.insertBefore(e),e.data(r,i)}}},_createEditRow:function(i){if(d.isFunction(this.editRowRenderer))return d(this.renderTemplate(this.editRowRenderer,this,{item:i,itemIndex:this._itemIndex(i)}));var r=d("<tr>").addClass(this.editRowClass);return this._eachField(function(e){var t=this._getItemFieldValue(i,e);this._prepareCell("<td>",e,"editcss").append(this.renderTemplate(e.editTemplate||"",e,{value:t,item:i})).appendTo(r)}),r},updateItem:function(e,t){1===arguments.length&&(t=e);var i=e?this.rowByItem(e):this._editingRow;if(t=t||this._getValidatedEditedItem())return this._updateRow(i,t)},_getValidatedEditedItem:function(){var e=this._getEditedItem();return this._validateItem(e,this._getEditRow())?e:null},_updateRow:function(r,a){var s=r.data(h),n=this._itemIndex(s),o=d.extend(!0,{},s,a),e=this._callEventHandler(this.onItemUpdating,{row:r,item:o,itemIndex:n,previousItem:s});return this._controllerCall("updateItem",o,e.cancel,function(e){var t=d.extend(!0,{},s);o=e||d.extend(!0,s,a);var i=this._finishUpdate(r,o,n);this._callEventHandler(this.onItemUpdated,{row:i,item:o,itemIndex:n,previousItem:t})})},_rowIndex:function(e){return this._content.children().index(d(e))},_itemIndex:function(e){return d.inArray(e,this.data)},_finishUpdate:function(e,t,i){this.cancelEdit(),this.data[i]=t;var r=this._createRow(t,i);return e.replaceWith(r),r},_getEditedItem:function(){var t={};return this._eachField(function(e){e.editing&&this._setItemFieldValue(t,e,e.editValue())}),t},cancelEdit:function(){this._editingRow&&(this._getEditRow().remove(),this._editingRow.show(),this._editingRow=null)},_getEditRow:function(){return this._editingRow&&this._editingRow.data(r)},deleteItem:function(e){var t=this.rowByItem(e);if(t.length&&(!this.confirmDeleting||i.confirm(l(this.deleteConfirm,this,t.data(h)))))return this._deleteRow(t)},_deleteRow:function(e){var t=e.data(h),i=this._itemIndex(t),r=this._callEventHandler(this.onItemDeleting,{row:e,item:t,itemIndex:i});return this._controllerCall("deleteItem",t,r.cancel,function(){this._loadStrategy.finishDelete(t,i),this._callEventHandler(this.onItemDeleted,{row:e,item:t,itemIndex:i})})}},d.fn.jsGrid=function(r){var a=d.makeArray(arguments).slice(1),s=this;return this.each(function(){var e,t=d(this),i=t.data(o);if(i)if("string"==typeof r){if((e=i[r].apply(i,a))!==n&&e!==i)return s=e,!1}else i._detachWindowResizeCallback(),i._init(r),i.render();else new c(t,r)}),s};var g={},u={},_=function(i,e){d.each(e,function(e,t){d.isPlainObject(t)?_(i[e]||i[e[0].toUpperCase()+e.slice(1)],t):i.hasOwnProperty(e)?i[e]=t:i.prototype[e]=t})};i.jsGrid={Grid:c,fields:g,setDefaults:function(e){var t;d.isPlainObject(e)?t=c.prototype:(t=g[e].prototype,e=arguments[1]||{}),d.extend(t,e)},locales:u,locale:function(e){var t=d.isPlainObject(e)?e:u[e];if(!t)throw Error("unknown locale "+e);_(jsGrid,t)},version:"@VERSION"}}(window,jQuery);